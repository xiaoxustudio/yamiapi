<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ui.js - YAMI_API-Xuran</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Actor.html">Actor</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Actor.html#callEvent">callEvent</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Actor.html#destroy">destroy</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Actor.html#emit">emit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Actor.html#isActive">isActive</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Actor.html#loadAttributes">loadAttributes</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Actor.html#loadEquipments">loadEquipments</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Actor.html#loadSkills">loadSkills</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Actor.html#loadSprites">loadSprites</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Actor.html#move">move</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Actor.html#restoreInventory">restoreInventory</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Actor.html#rotate">rotate</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Actor.html#saveData">saveData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Actor.html#setActive">setActive</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Actor.html#setAngle">setAngle</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Actor.html#setAnimation">setAnimation</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Actor.html#setPassage">setPassage</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Actor.html#setPosition">setPosition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Actor.html#setScale">setScale</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Actor.html#setSprite">setSprite</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Actor.html#setTeam">setTeam</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Actor.html#translate">translate</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Actor.html#update">update</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Actor.html#updateAngle">updateAngle</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Actor.html#updateGridPosition">updateGridPosition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Actor.html#updateHitTimestamp">updateHitTimestamp</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Actor.html#useInventory">useInventory</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Actor.html#.initialize">initialize</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="ActorCollider.html">ActorCollider</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ActorCollider.html#.handleActorCollisions">handleActorCollisions</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ActorCollider.html#.handleSceneCollisions">handleSceneCollisions</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ActorCollider.html#.initialize">initialize</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="ActorNavigator.html">ActorNavigator</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ActorNavigator.html#_circleApproachTarget">_circleApproachTarget</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ActorNavigator.html#_circleFollowTarget">_circleFollowTarget</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ActorNavigator.html#_circleFollowTargetOnce">_circleFollowTargetOnce</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ActorNavigator.html#_circleLeaveTarget">_circleLeaveTarget</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ActorNavigator.html#_circleNavigateToTarget">_circleNavigateToTarget</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ActorNavigator.html#_followTargetBuffer">_followTargetBuffer</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ActorNavigator.html#_rectangleApproachTarget">_rectangleApproachTarget</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ActorNavigator.html#_rectangleFollowTarget">_rectangleFollowTarget</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ActorNavigator.html#_rectangleFollowTargetOnce">_rectangleFollowTargetOnce</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ActorNavigator.html#_rectangleNavigateToTarget">_rectangleNavigateToTarget</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ActorNavigator.html#_switchToFollowTargetBuffer">_switchToFollowTargetBuffer</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ActorNavigator.html#calculateVelocity">calculateVelocity</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ActorNavigator.html#followCircle">followCircle</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ActorNavigator.html#followRectangle">followRectangle</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ActorNavigator.html#moveTo">moveTo</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ActorNavigator.html#moveTowardAngle">moveTowardAngle</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ActorNavigator.html#navigateTo">navigateTo</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ActorNavigator.html#onFinish">onFinish</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ActorNavigator.html#route">route</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ActorNavigator.html#setMovementFactor">setMovementFactor</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ActorNavigator.html#setMovementFactorTemp">setMovementFactorTemp</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ActorNavigator.html#setMovementSpeed">setMovementSpeed</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ActorNavigator.html#stopMoving">stopMoving</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ActorNavigator.html#updateForwardMovement">updateForwardMovement</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ActorNavigator.html#updatePathMovement">updatePathMovement</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Animation.html">Animation</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Animation.html#activate">activate</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Animation.html#deleteTexture">deleteTexture</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Animation.html#destroy">destroy</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Animation.html#destroyActiveEmitters">destroyActiveEmitters</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Animation.html#destroyContextEmitters">destroyContextEmitters</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Animation.html#draw">draw</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Animation.html#drawSprite">drawSprite</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Animation.html#emitParticles">emitParticles</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Animation.html#finish">finish</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Animation.html#getCurrentTime">getCurrentTime</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Animation.html#getDirectionAngle">getDirectionAngle</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Animation.html#getDuration">getDuration</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Animation.html#getTexture">getTexture</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Animation.html#loadContexts">loadContexts</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Animation.html#loadDirCase">loadDirCase</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Animation.html#loadTexture">loadTexture</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Animation.html#onFinish">onFinish</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Animation.html#release">release</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Animation.html#restart">restart</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Animation.html#restoreSpriteImages">restoreSpriteImages</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Animation.html#setAngle">setAngle</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Animation.html#setDirection">setDirection</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Animation.html#setDrawingPosition">setDrawingPosition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Animation.html#setMotion">setMotion</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Animation.html#setPosition">setPosition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Animation.html#setSpriteImages">setSpriteImages</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Animation.html#update">update</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Animation.html#updateFrameParameters">updateFrameParameters</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Animation.html#updateRotation">updateRotation</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Animation.html#._loadContext">_loadContext</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Animation.html#.contextReset">contextReset</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Animation.html#.contextUpdate">contextUpdate</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Animation.html#.contextUpdateParticle">contextUpdateParticle</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Animation.html#.contextUpdateSound">contextUpdateSound</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Animation.html#.contextUpdateSprite">contextUpdateSprite</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Animation.html#.initialize">initialize</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Animation.html#.loadContexts">loadContexts</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="AnimationController.html">AnimationController</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="AnimationController.html#bindAnimation">bindAnimation</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="AnimationController.html#changeMotion">changeMotion</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="AnimationController.html#getCurrentMotionName">getCurrentMotionName</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="AnimationController.html#loadData">loadData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="AnimationController.html#playMotion">playMotion</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="AnimationController.html#restart">restart</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="AnimationController.html#saveData">saveData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="AnimationController.html#startIdle">startIdle</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="AnimationController.html#startMoving">startMoving</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="AnimationController.html#stopMotion">stopMotion</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="AudioPlayer.html">AudioPlayer</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="AudioPlayer.html#continue">continue</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="AudioPlayer.html#pause">pause</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="AudioPlayer.html#play">play</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="AudioPlayer.html#reset">reset</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="AudioPlayer.html#restore">restore</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="AudioPlayer.html#save">save</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="AudioPlayer.html#setLoop">setLoop</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="AudioPlayer.html#setPan">setPan</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="AudioPlayer.html#setReverb">setReverb</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="AudioPlayer.html#setVolume">setVolume</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="AudioPlayer.html#stop">stop</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="AudioReverb.html">AudioReverb</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="AudioReverb.html#connect">connect</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="AudioReverb.html#disconnect">disconnect</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="AudioReverb.html#set">set</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="AudioReverb.html#setDry">setDry</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="AudioReverb.html#setWet">setWet</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="AudioReverb.html#.getConvolver">getConvolver</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="BatchRenderer.html">BatchRenderer</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="CooldownItem.html">CooldownItem</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="CooldownManager.html">CooldownManager</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="CooldownManager.html#create">create</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="CooldownManager.html#decreaseCooldown">decreaseCooldown</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="CooldownManager.html#delete">delete</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="CooldownManager.html#get">get</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="CooldownManager.html#increaseCooldown">increaseCooldown</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="CooldownManager.html#loadData">loadData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="CooldownManager.html#saveData">saveData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="CooldownManager.html#setCooldown">setCooldown</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="CooldownManager.html#update">update</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="DialogBoxElement.html">DialogBoxElement</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="DialogBoxElement.html#calculateTextPosition">calculateTextPosition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="DialogBoxElement.html#continue">continue</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="DialogBoxElement.html#destroy">destroy</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="DialogBoxElement.html#draw">draw</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="DialogBoxElement.html#drawBuffer">drawBuffer</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="DialogBoxElement.html#pause">pause</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="DialogBoxElement.html#print">print</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="DialogBoxElement.html#printImmediately">printImmediately</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="DialogBoxElement.html#printNextPage">printNextPage</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="DialogBoxElement.html#reload">reload</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="DialogBoxElement.html#resize">resize</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="DialogBoxElement.html#resizeEmbeddedImages">resizeEmbeddedImages</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="DialogBoxElement.html#update">update</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="EasingMap.html">EasingMap</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="EasingMap.html#map">map</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Equipment.html">Equipment</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Equipment.html#callEvent">callEvent</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Equipment.html#emit">emit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Equipment.html#equip">equip</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Equipment.html#remove">remove</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Equipment.html#saveData">saveData</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="EquipmentManager.html">EquipmentManager</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="EquipmentManager.html#delete">delete</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="EquipmentManager.html#get">get</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="EquipmentManager.html#getById">getById</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="EquipmentManager.html#loadData">loadData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="EquipmentManager.html#remove">remove</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="EquipmentManager.html#saveData">saveData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="EquipmentManager.html#set">set</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="EventHandler.html">EventHandler</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="EventHandler.html#continue">continue</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="EventHandler.html#finish">finish</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="EventHandler.html#getTimer">getTimer</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="EventHandler.html#onFinish">onFinish</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="EventHandler.html#pause">pause</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="EventHandler.html#update">update</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="EventHandler.html#wait">wait</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="EventHandler.html#.restore">restore</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="EventHandler.html#.save">save</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="ImageElement.html">ImageElement</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ImageElement.html#destroy">destroy</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ImageElement.html#draw">draw</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ImageElement.html#loadBase64">loadBase64</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ImageElement.html#resize">resize</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ImageElement.html#setImageClip">setImageClip</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ImageElement.html#setTint">setTint</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="ImageTexture.html">ImageTexture</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ImageTexture.html#destroy">destroy</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ImageTexture.html#updateSliceData">updateSliceData</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Inventory.html">Inventory</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Inventory.html#addToMap">addToMap</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Inventory.html#count">count</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Inventory.html#createEquipment">createEquipment</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Inventory.html#createItems">createItems</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Inventory.html#decreaseItems">decreaseItems</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Inventory.html#decreaseMoney">decreaseMoney</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Inventory.html#deleteEquipment">deleteEquipment</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Inventory.html#gainEquipment">gainEquipment</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Inventory.html#get">get</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Inventory.html#getList">getList</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Inventory.html#increaseItems">increaseItems</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Inventory.html#increaseMoney">increaseMoney</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Inventory.html#insert">insert</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Inventory.html#loadData">loadData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Inventory.html#loseEquipment">loseEquipment</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Inventory.html#remove">remove</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Inventory.html#removeFromMap">removeFromMap</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Inventory.html#reset">reset</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Inventory.html#saveData">saveData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Inventory.html#sort">sort</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Inventory.html#swap">swap</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Item.html">Item</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Item.html#callEvent">callEvent</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Item.html#decrease">decrease</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Item.html#emit">emit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Item.html#increase">increase</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Item.html#remove">remove</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Item.html#saveData">saveData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Item.html#use">use</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Matrix.html">Matrix</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Matrix.html#mirrorh">mirrorh</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Matrix.html#mirrorv">mirrorv</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Matrix.html#multiply">multiply</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Matrix.html#project">project</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Matrix.html#reset">reset</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Matrix.html#rotate">rotate</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Matrix.html#rotateAt">rotateAt</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Matrix.html#scale">scale</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Matrix.html#scaleAt">scaleAt</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Matrix.html#set">set</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Matrix.html#set6f">set6f</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Matrix.html#skewAt">skewAt</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Matrix.html#translate">translate</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Matrix.html#translateY">translateY</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="MultipleAudioPlayer.html">MultipleAudioPlayer</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="MultipleAudioPlayer.html#continue">continue</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="MultipleAudioPlayer.html#getAudio">getAudio</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="MultipleAudioPlayer.html#getRecentlyAudio">getRecentlyAudio</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="MultipleAudioPlayer.html#pause">pause</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="MultipleAudioPlayer.html#play">play</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="MultipleAudioPlayer.html#playAt">playAt</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="MultipleAudioPlayer.html#reset">reset</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="MultipleAudioPlayer.html#setLoop">setLoop</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="MultipleAudioPlayer.html#setPan">setPan</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="MultipleAudioPlayer.html#setReverb">setReverb</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="MultipleAudioPlayer.html#setVolume">setVolume</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="MultipleAudioPlayer.html#stop">stop</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="ParticleElement.html">ParticleElement</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ParticleElement.html#draw">draw</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ParticleElement.html#getAreaPosition">getAreaPosition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ParticleElement.html#getBoundingRectangle">getBoundingRectangle</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ParticleElement.html#getColorInt">getColorInt</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ParticleElement.html#initialize">initialize</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ParticleElement.html#postProcessingCommon">postProcessingCommon</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ParticleElement.html#postProcessingEdge">postProcessingEdge</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ParticleElement.html#setStartColorEasing">setStartColorEasing</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ParticleElement.html#setStartColorFixed">setStartColorFixed</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ParticleElement.html#setStartColorRandom">setStartColorRandom</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ParticleElement.html#setStartColorTexture">setStartColorTexture</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ParticleElement.html#setStartPositionCircle">setStartPositionCircle</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ParticleElement.html#setStartPositionEdge">setStartPositionEdge</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ParticleElement.html#setStartPositionPoint">setStartPositionPoint</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ParticleElement.html#setStartPositionRectangle">setStartPositionRectangle</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ParticleElement.html#transformStartPosition">transformStartPosition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ParticleElement.html#update">update</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ParticleElement.html#updateColorEasing">updateColorEasing</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ParticleElement.html#updateMethods">updateMethods</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="ParticleEmitter.html">ParticleEmitter</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ParticleEmitter.html#destroy">destroy</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ParticleEmitter.html#draw">draw</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ParticleEmitter.html#emitParticles">emitParticles</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ParticleEmitter.html#isEmpty">isEmpty</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ParticleEmitter.html#translateParticles">translateParticles</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ParticleEmitter.html#update">update</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ParticleEmitter.html#updateParticles">updateParticles</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="ParticleLayer.html">ParticleLayer</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ParticleLayer.html#calculateElementSize">calculateElementSize</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ParticleLayer.html#destroy">destroy</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ParticleLayer.html#draw">draw</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ParticleLayer.html#emitParticles">emitParticles</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ParticleLayer.html#loadTexture">loadTexture</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ParticleLayer.html#translateParticles">translateParticles</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ParticleLayer.html#updateCount">updateCount</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ParticleLayer.html#updateEasing">updateEasing</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ParticleLayer.html#updateParticles">updateParticles</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Printer.html">Printer</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Printer.html#calculatePadding">calculatePadding</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Printer.html#calculateTextPosition">calculateTextPosition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Printer.html#destroy">destroy</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Printer.html#draw">draw</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Printer.html#drawBuffer">drawBuffer</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Printer.html#executeCommands">executeCommands</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Printer.html#loadImage">loadImage</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Printer.html#matchTag">matchTag</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Printer.html#measureHeight">measureHeight</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Printer.html#measureWidth">measureWidth</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Printer.html#newLine">newLine</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Printer.html#reset">reset</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Printer.html#updateFont">updateFont</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Printer.html#.drawText">drawText</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Printer.html#.drawTextWithOutline">drawTextWithOutline</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Printer.html#.drawTextWithShadow">drawTextWithShadow</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Printer.html#.drawTextWithStroke">drawTextWithStroke</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Printer.html#.fetchCommand">fetchCommand</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Printer.html#.importFonts">importFonts</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Printer.html#.initialize">initialize</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Printer.html#.loadDefault">loadDefault</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Printer.html#.parseEffect">parseEffect</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Printer.html#.resetCommands">resetCommands</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Printer.html#.restoreTexture">restoreTexture</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="ProgressBarElement.html">ProgressBarElement</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ProgressBarElement.html#calculateProgressVertices">calculateProgressVertices</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ProgressBarElement.html#destroy">destroy</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ProgressBarElement.html#draw">draw</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ProgressBarElement.html#resize">resize</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="SceneActorList.html">SceneActorList</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneActorList.html#append">append</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneActorList.html#autorun">autorun</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneActorList.html#count">count</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneActorList.html#destroy">destroy</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneActorList.html#loadData">loadData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneActorList.html#remove">remove</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneActorList.html#saveData">saveData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneActorList.html#setMaxColliderSize">setMaxColliderSize</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneActorList.html#setMaxGridCellSize">setMaxGridCellSize</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneActorList.html#update">update</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneActorList.html#updateGridPosAndCells">updateGridPosAndCells</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="SceneAnimation.html">SceneAnimation</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneAnimation.html#callEvent">callEvent</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneAnimation.html#destroy">destroy</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneAnimation.html#emit">emit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneAnimation.html#saveData">saveData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneAnimation.html#update">update</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="SceneAnimationList.html">SceneAnimationList</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneAnimationList.html#append">append</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneAnimationList.html#autorun">autorun</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneAnimationList.html#destroy">destroy</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneAnimationList.html#loadData">loadData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneAnimationList.html#remove">remove</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneAnimationList.html#saveData">saveData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneAnimationList.html#update">update</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="SceneContext.html">SceneContext</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneContext.html#callEvent">callEvent</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneContext.html#destroy">destroy</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneContext.html#emit">emit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneContext.html#getActor">getActor</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneContext.html#getMultipleActors">getMultipleActors</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneContext.html#getWallPosByRay">getWallPosByRay</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneContext.html#isInLineOfSight">isInLineOfSight</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneContext.html#isInWallBlock">isInWallBlock</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneContext.html#load">load</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneContext.html#loadData">loadData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneContext.html#loadObjects">loadObjects</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneContext.html#loadSubscene">loadSubscene</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneContext.html#loadTerrainObstacles">loadTerrainObstacles</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneContext.html#render">render</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneContext.html#saveData">saveData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneContext.html#setAmbientLight">setAmbientLight</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneContext.html#unloadSubscene">unloadSubscene</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneContext.html#update">update</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneContext.html#updateTerrainObstacle">updateTerrainObstacle</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="SceneGridCellList.html">SceneGridCellList</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneGridCellList.html#append">append</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneGridCellList.html#get">get</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneGridCellList.html#grow">grow</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneGridCellList.html#optimize">optimize</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneGridCellList.html#remove">remove</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneGridCellList.html#resize">resize</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneGridCellList.html#shrink">shrink</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneGridCellList.html#update">update</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="SceneLight.html">SceneLight</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneLight.html#callEvent">callEvent</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneLight.html#destroy">destroy</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneLight.html#draw">draw</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneLight.html#drawAreaLight">drawAreaLight</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneLight.html#drawPointLight">drawPointLight</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneLight.html#emit">emit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneLight.html#measure">measure</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneLight.html#move">move</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneLight.html#saveData">saveData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneLight.html#update">update</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="SceneLightManager.html">SceneLightManager</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneLightManager.html#append">append</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneLightManager.html#autorun">autorun</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneLightManager.html#destroy">destroy</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneLightManager.html#loadData">loadData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneLightManager.html#remove">remove</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneLightManager.html#render">render</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneLightManager.html#saveData">saveData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneLightManager.html#update">update</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="SceneObstacleArray.html">SceneObstacleArray</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneObstacleArray.html#append">append</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneObstacleArray.html#remove">remove</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneObstacleArray.html#update">update</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="SceneParallax.html">SceneParallax</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneParallax.html#callEvent">callEvent</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneParallax.html#destroy">destroy</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneParallax.html#draw">draw</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneParallax.html#emit">emit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneParallax.html#saveData">saveData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneParallax.html#update">update</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="SceneParallaxManager.html">SceneParallaxManager</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneParallaxManager.html#append">append</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneParallaxManager.html#autorun">autorun</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneParallaxManager.html#destroy">destroy</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneParallaxManager.html#getTileTerrain">getTileTerrain</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneParallaxManager.html#loadData">loadData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneParallaxManager.html#remove">remove</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneParallaxManager.html#saveData">saveData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneParallaxManager.html#sort">sort</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneParallaxManager.html#update">update</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="SceneParticleEmitter.html">SceneParticleEmitter</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneParticleEmitter.html#callEvent">callEvent</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneParticleEmitter.html#destroy">destroy</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneParticleEmitter.html#emit">emit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneParticleEmitter.html#saveData">saveData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneParticleEmitter.html#update">update</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="SceneParticleEmitterList.html">SceneParticleEmitterList</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneParticleEmitterList.html#append">append</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneParticleEmitterList.html#autorun">autorun</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneParticleEmitterList.html#destroy">destroy</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneParticleEmitterList.html#loadData">loadData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneParticleEmitterList.html#remove">remove</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneParticleEmitterList.html#saveData">saveData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneParticleEmitterList.html#update">update</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="SceneRegion.html">SceneRegion</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneRegion.html#callEvent">callEvent</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneRegion.html#createEventUpdaters">createEventUpdaters</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneRegion.html#destroy">destroy</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneRegion.html#emit">emit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneRegion.html#saveData">saveData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneRegion.html#update">update</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="SceneRegionList.html">SceneRegionList</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneRegionList.html#append">append</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneRegionList.html#autorun">autorun</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneRegionList.html#destroy">destroy</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneRegionList.html#loadData">loadData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneRegionList.html#remove">remove</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneRegionList.html#saveData">saveData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneRegionList.html#update">update</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="SceneSpriteRenderer.html">SceneSpriteRenderer</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneSpriteRenderer.html#render">render</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneSpriteRenderer.html#reset">reset</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneSpriteRenderer.html#setObjectLists">setObjectLists</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="SceneTerrainArray.html">SceneTerrainArray</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="SceneTilemap.html">SceneTilemap</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneTilemap.html#callEvent">callEvent</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneTilemap.html#deleteTile">deleteTile</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneTilemap.html#destroy">destroy</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneTilemap.html#draw">draw</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneTilemap.html#emit">emit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneTilemap.html#getTileTerrain">getTileTerrain</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneTilemap.html#loadTextures">loadTextures</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneTilemap.html#saveData">saveData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneTilemap.html#setTile">setTile</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneTilemap.html#update">update</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="SceneTriggerList.html">SceneTriggerList</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneTriggerList.html#append">append</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneTriggerList.html#destroy">destroy</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneTriggerList.html#remove">remove</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SceneTriggerList.html#update">update</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Script.html">Script</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Script.html#add">add</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Script.html#call">call</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Script.html#emit">emit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Script.html#remove">remove</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Script.html#.compileParamList">compileParamList</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Script.html#.create">create</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Script.html#.loadDeferredParameters">loadDeferredParameters</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Script.html#.pushDeferredParameter">pushDeferredParameter</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Shortcut.html">Shortcut</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Skill.html">Skill</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Skill.html#callEvent">callEvent</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Skill.html#cast">cast</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Skill.html#decreaseCooldown">decreaseCooldown</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Skill.html#emit">emit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Skill.html#increaseCooldown">increaseCooldown</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Skill.html#remove">remove</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Skill.html#saveData">saveData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Skill.html#setCooldown">setCooldown</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="SkillCooldownList.html">SkillCooldownList</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SkillCooldownList.html#append">append</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SkillCooldownList.html#update">update</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="SkillManager.html">SkillManager</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SkillManager.html#add">add</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SkillManager.html#delete">delete</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SkillManager.html#get">get</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SkillManager.html#loadData">loadData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SkillManager.html#remove">remove</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SkillManager.html#saveData">saveData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SkillManager.html#sort">sort</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="State.html">State</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="State.html#callEvent">callEvent</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="State.html#decreaseTime">decreaseTime</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="State.html#emit">emit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="State.html#increaseTime">increaseTime</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="State.html#saveData">saveData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="State.html#setTime">setTime</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="StateCountdownList.html">StateCountdownList</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="StateCountdownList.html#append">append</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="StateCountdownList.html#remove">remove</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="StateCountdownList.html#update">update</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="StateManager.html">StateManager</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="StateManager.html#add">add</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="StateManager.html#delete">delete</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="StateManager.html#get">get</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="StateManager.html#loadData">loadData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="StateManager.html#remove">remove</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="StateManager.html#saveData">saveData</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="TargetManager.html">TargetManager</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TargetManager.html#append">append</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TargetManager.html#decreaseThreat">decreaseThreat</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TargetManager.html#detect">detect</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TargetManager.html#discard">discard</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TargetManager.html#getTargetFarthest">getTargetFarthest</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TargetManager.html#getTargetMaxAttributeRatio">getTargetMaxAttributeRatio</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TargetManager.html#getTargetMaxAttributeValue">getTargetMaxAttributeValue</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TargetManager.html#getTargetMaxThreat">getTargetMaxThreat</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TargetManager.html#getTargetMinAttributeRatio">getTargetMinAttributeRatio</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TargetManager.html#getTargetMinAttributeValue">getTargetMinAttributeValue</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TargetManager.html#getTargetNearest">getTargetNearest</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TargetManager.html#getTargetRandom">getTargetRandom</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TargetManager.html#increaseThreat">increaseThreat</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TargetManager.html#remove">remove</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TargetManager.html#reset">reset</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TargetManager.html#resetRelatedTargets">resetRelatedTargets</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TargetManager.html#resetTargets">resetTargets</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="TextBoxElement.html">TextBoxElement</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TextBoxElement.html#addEventListeners">addEventListeners</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TextBoxElement.html#beforeinputEvent">beforeinputEvent</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TextBoxElement.html#blurEvent">blurEvent</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TextBoxElement.html#calculateHTMLInputPosition">calculateHTMLInputPosition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TextBoxElement.html#calculateTextPosition">calculateTextPosition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TextBoxElement.html#changeEvent">changeEvent</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TextBoxElement.html#connect">connect</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TextBoxElement.html#createHTMLInputElement">createHTMLInputElement</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TextBoxElement.html#destroy">destroy</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TextBoxElement.html#disconnect">disconnect</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TextBoxElement.html#draw">draw</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TextBoxElement.html#fineTuneNumber">fineTuneNumber</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TextBoxElement.html#focusEvent">focusEvent</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TextBoxElement.html#hide">hide</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TextBoxElement.html#inputEvent">inputEvent</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TextBoxElement.html#keydownEvent">keydownEvent</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TextBoxElement.html#readInputNumber">readInputNumber</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TextBoxElement.html#removeEventListeners">removeEventListeners</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TextBoxElement.html#resize">resize</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TextBoxElement.html#show">show</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TextBoxElement.html#update">update</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TextBoxElement.html#wheelEvent">wheelEvent</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="TextElement.html">TextElement</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TextElement.html#calculateTextPosition">calculateTextPosition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TextElement.html#destroy">destroy</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TextElement.html#draw">draw</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TextElement.html#resize">resize</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TextElement.html#resizeEmbeddedImages">resizeEmbeddedImages</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TextElement.html#update">update</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Texture.html">Texture</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Texture.html#clear">clear</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Texture.html#clip">clip</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Texture.html#destroy">destroy</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Texture.html#fromImage">fromImage</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Texture.html#getImageData">getImageData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Texture.html#resize">resize</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Texture.html#toBase64">toBase64</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="TextureManager.html">TextureManager</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TextureManager.html#append">append</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TextureManager.html#delete">delete</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TextureManager.html#update">update</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Timer.html">Timer</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Timer.html#add">add</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Timer.html#remove">remove</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Timer.html#tick">tick</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Timer.html#.update">update</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Timer.html#.wait">wait</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Timer.html#.waitRaw">waitRaw</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Trigger.html">Trigger</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Trigger.html#calculateAnimDirection">calculateAnimDirection</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Trigger.html#callEvent">callEvent</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Trigger.html#destroy">destroy</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Trigger.html#emit">emit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Trigger.html#loadAnimation">loadAnimation</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Trigger.html#remove">remove</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Trigger.html#setAngle">setAngle</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Trigger.html#setPosition">setPosition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Trigger.html#setScale">setScale</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Trigger.html#setSpeed">setSpeed</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Trigger.html#update">update</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Trigger.html#updateAnimation">updateAnimation</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Trigger.html#updateCollision">updateCollision</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Trigger.html#updateMovement">updateMovement</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Trigger.html#updateVelocity">updateVelocity</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Trigger.html#.getActorsBySelector">getActorsBySelector</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Trigger.html#.update">update</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="UIElement.html">UIElement</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="UIElement.html#appendChild">appendChild</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="UIElement.html#appendChildren">appendChildren</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="UIElement.html#calculatePosition">calculatePosition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="UIElement.html#callEvent">callEvent</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="UIElement.html#clear">clear</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="UIElement.html#connect">connect</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="UIElement.html#connectChildren">connectChildren</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="UIElement.html#contains">contains</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="UIElement.html#destroy">destroy</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="UIElement.html#destroyChildren">destroyChildren</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="UIElement.html#disconnect">disconnect</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="UIElement.html#disconnectChildren">disconnectChildren</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="UIElement.html#drawChildren">drawChildren</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="UIElement.html#emit">emit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="UIElement.html#hide">hide</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="UIElement.html#insertBefore">insertBefore</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="UIElement.html#isPointIn">isPointIn</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="UIElement.html#isVisible">isVisible</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="UIElement.html#move">move</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="UIElement.html#moveToIndex">moveToIndex</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="UIElement.html#query">query</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="UIElement.html#remove">remove</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="UIElement.html#resizeChildren">resizeChildren</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="UIElement.html#set">set</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="UIElement.html#show">show</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="VideoElement.html">VideoElement</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="VideoElement.html#connect">connect</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="VideoElement.html#continue">continue</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="VideoElement.html#createVideoFrameUpdater">createVideoFrameUpdater</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="VideoElement.html#destroy">destroy</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="VideoElement.html#disconnect">disconnect</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="VideoElement.html#draw">draw</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="VideoElement.html#onEnded">onEnded</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="VideoElement.html#pause">pause</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="VideoElement.html#resize">resize</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="WindowElement.html">WindowElement</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WindowElement.html#_calculateScrollArea">_calculateScrollArea</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WindowElement.html#draw">draw</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WindowElement.html#drawChildren">drawChildren</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WindowElement.html#getVisibleGridColumns">getVisibleGridColumns</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WindowElement.html#getVisibleGridRows">getVisibleGridRows</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WindowElement.html#requestResizing">requestResizing</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WindowElement.html#resize">resize</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WindowElement.html#scrollToChild">scrollToChild</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WindowElement.html#.horizontalGridResize">horizontalGridResize</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="WindowElement.html#.verticalGridResize">verticalGridResize</a></span></li><li class="nav-heading"><a href="global.html">Globals</a></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#GL">GL</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#_createElement">_createElement</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#_updateBubbleState">_updateBubbleState</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#activate">activate</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#add">add</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#addMember">addMember</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#addPointerEventRoot">addPointerEventRoot</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#append">append</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#autorun">autorun</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#bind">bind</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#blur">blur</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#buildPath">buildPath</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#calculateCoords">calculateCoords</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#calculateSceneCoords">calculateSceneCoords</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#call">call</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#callAutorunEvents">callAutorunEvents</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#callSpecialEvent">callSpecialEvent</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#changeRelation">changeRelation</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#checkIfRemovedHover">checkIfRemovedHover</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#clearGlobalActors">clearGlobalActors</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#compileEvents">compileEvents</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#continue">continue</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#convertToScreenCoords">convertToScreenCoords</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#create">create</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#createAutotileMap">createAutotileMap</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#createEasingMap">createEasingMap</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#createElement">createElement</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#createFollower">createFollower</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#createMembers">createMembers</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#createPath">createPath</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#createPlayer">createPlayer</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#createUnitPath">createUnitPath</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#decodeClone">decodeClone</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#decodeTeamData">decodeTeamData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#decodeTerrains">decodeTerrains</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#decodeTiles">decodeTiles</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#delete">delete</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#deleteGameData">deleteGameData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#disable">disable</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#displayErrorMessage">displayErrorMessage</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#doubleclick">doubleclick</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#emit">emit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#emitInputEvent">emitInputEvent</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#enable">enable</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#encodeTeamData">encodeTeamData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#encodeTerrains">encodeTerrains</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#executeCallbacks">executeCallbacks</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#find">find</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#follow">follow</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#gamepadbuttonpress">gamepadbuttonpress</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#gamepadbuttonrelease">gamepadbuttonrelease</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#gamepadleftstickchange">gamepadleftstickchange</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#gamepadrightstickchange">gamepadrightstickchange</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#generate32bit">generate32bit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#generate64bit">generate64bit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#get">get</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getElementAtMouse">getElementAtMouse</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getGroup">getGroup</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getItem">getItem</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getKey">getKey</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getKeys">getKeys</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getName">getName</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getParallaxAnchor">getParallaxAnchor</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getPathByGUID">getPathByGUID</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getPointerEventRoot">getPointerEventRoot</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getRelationByIndexes">getRelationByIndexes</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getValue">getValue</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#initialize">initialize</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#isEnemy">isEnemy</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#isFriendly">isFriendly</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#isMacOS">isMacOS</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#keydown">keydown</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#keydownFilter">keydownFilter</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#keyup">keyup</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#load">load</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#loadData">loadData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#loadFile">loadFile</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#loadGameData">loadGameData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#loadGlobalData">loadGlobalData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#loadMeta">loadMeta</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#loadObjects">loadObjects</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#loadPresets">loadPresets</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#loadSaveMeta">loadSaveMeta</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#loadScene">loadScene</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#loadScripts">loadScripts</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#loadUI">loadUI</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#mousedown">mousedown</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#mousedownLB">mousedownLB</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#mousedownRB">mousedownRB</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#mouseleave">mouseleave</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#mousemove">mousemove</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#mouseup">mouseup</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#mouseupLB">mouseupLB</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#mouseupRB">mouseupRB</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#moveTo">moveTo</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#off">off</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#on">on</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#onTransitionEnd">onTransitionEnd</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#open">open</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#parseCSSColor">parseCSSColor</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#parseDateTimestamp">parseDateTimestamp</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#parseFloatArray">parseFloatArray</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#parseFloatArrayTag">parseFloatArrayTag</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#parseGUID">parseGUID</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#parseInt">parseInt</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#parseIntArray">parseIntArray</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#pause">pause</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#pointerdown">pointerdown</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#pointerenter">pointerenter</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#pointerleave">pointerleave</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#pointermove">pointermove</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#pointerup">pointerup</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#pop">pop</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#precompile">precompile</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#precompileActors">precompileActors</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#precompileAnimations">precompileAnimations</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#precompileEquipments">precompileEquipments</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#precompileItems">precompileItems</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#precompileSkills">precompileSkills</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#precompileStates">precompileStates</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#precompileTriggers">precompileTriggers</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#preventInput">preventInput</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#push">push</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#remapScripts">remapScripts</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#remove">remove</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#removeItem">removeItem</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#removeLatestPointerEventRoot">removeLatestPointerEventRoot</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#removeMember">removeMember</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#removePointerEventRoot">removePointerEventRoot</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#render">render</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#renderLoadingProgress">renderLoadingProgress</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#reset">reset</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#resetPointerEventRoots">resetPointerEventRoots</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#resize">resize</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#restoreInput">restoreInput</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#rotateAndScaleCanvas">rotateAndScaleCanvas</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#route">route</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#saveData">saveData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#saveGameData">saveGameData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#saveGlobalData">saveGlobalData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#scaleCanvas">scaleCanvas</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#set">set</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setBypass">setBypass</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setItem">setItem</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setPlayer">setPlayer</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setTimeScale">setTimeScale</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setToHighestPriority">setToHighestPriority</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#setZoomFactor">setZoomFactor</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#shake">shake</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#shareInventory">shareInventory</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#simulateButton">simulateButton</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#simulateKey">simulateKey</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#start">start</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#stop">stop</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#switchGameInfoDisplay">switchGameInfoDisplay</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#testConditions">testConditions</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#unfollow">unfollow</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#unpack">unpack</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#unpackTeamData">unpackTeamData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#update">update</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#updateLoadingProgress">updateLoadingProgress</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#wheel">wheel</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#xhr">xhr</a></span></li>
</nav>

<div id="main">
    
    <h1 class="page-title">ui.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict'

// ********************************  ********************************

const UI = new class {
  /** 
   *  @type {RootElement}
   */ root

  /** 
   *  @type {Array&lt;UIElement>}
   */ pointerEventRoots = []

  /** 
   *  @type {Array&lt;UIElement>}
   */ focuses = []

  /** 
   *  @type {string}
   */ dirKey = ''

  /** 
   *  @type {boolean}
   */ turbo = false

  /** 
   *  @type {number}
   */ turboElapsed = 0

  /** 
   *  @type {UIElement|undefined}
   */ latest

  /** 
   *  @type {UIElement|null}
   */ target = null

  /** 
   *  @type {UIElement|null}
   */ hover = null

  /** 
   *  @type {UIElementManager}
   */ manager

  /** ID->
   *  @type {Object}
   */ presets = {}

  /** ID->
   *  @type {Object}
   */ idMap = {}

  // 
  elementClassMap

  /**  */
  initialize() {
    // 
    this.root = new RootElement()
    this.root.resize()

    // 
    this.manager = UIElementManager

    // 
    this.loadPresets()

    // (->)
    this.elementClassMap = {
      image: ImageElement,
      text: TextElement,
      textbox: TextBoxElement,
      dialogbox: DialogBoxElement,
      progressbar: ProgressBarElement,
      button: ButtonElement,
      animation: AnimationElement,
      video: VideoElement,
      window: WindowElement,
      container: ContainerElement,
    }

    // 
    window.on('resize', this.resize)
    Input.on('keydown', this.keydown)
    Input.on('keyup', this.keyup)
    Input.on('mousedown', this.mousedown)
    Input.on('mousedownLB', this.mousedownLB)
    Input.on('mousedownRB', this.mousedownRB)
    Input.on('mouseup', this.mouseup)
    Input.on('mouseupLB', this.mouseupLB)
    Input.on('mouseupRB', this.mouseupRB)
    Input.on('mousemove', this.mousemove)
    Input.on('mouseleave', this.mouseleave)
    Input.on('doubleclick', this.doubleclick)
    Input.on('wheel', this.wheel)
    Input.on('gamepadbuttonpress', this.gamepadbuttonpress)
    Input.on('gamepadbuttonrelease', this.gamepadbuttonrelease)
    Input.on('gamepadleftstickchange', this.gamepadleftstickchange)
    Input.on('gamepadrightstickchange', this.gamepadrightstickchange)
  }

  /**  */
  loadPresets() {
    const presets = this.presets
    const setMap = (nodes, ui) => {
      for (const node of nodes) {
        node.ui = ui
        presets[node.presetId] = node
        if (node.children.length !== 0) {
          setMap(node.children, ui)
        }
      }
    }
    for (const ui of Object.values(Data.ui)) {
      setMap(ui.nodes, ui)
    }
  }

  /**
   * 
   * @param {string} uiId ID
   * @returns {UIElement[]}
   */
  loadUI(uiId) {
    const elements = []
    const ui = Data.ui[uiId]
    if (!ui) return elements
    Script.deferredLoading = true
    // 
    for (const node of ui.nodes) {
      if (node.enabled) {
        elements.push(this._createElement(node))
      }
    }
    Script.loadDeferredParameters()
    return elements
  }

  /**
   * 
   * @param {string} presetId ID
   * @returns {UIElement}
   */
  createElement(presetId) {
    const preset = UI.presets[presetId]
    if (preset) {
      Script.deferredLoading = true
      const element = this._createElement(preset)
      Script.loadDeferredParameters()
      return element
    }
    throw new Error(`Invalid Element ID: ${presetId}`)
  }

  /**
   * ()
   * @param {Object} node 
   * @returns {UIElement}
   */
  _createElement(node) {
    // 
    if (Array.isArray(node.events)) {
      Data.compileEvents(node, `${node.ui.path}\n@ ${node.name}.${node.presetId}`)
    }
    const element = new UI.elementClassMap[node.class](node)
    for (const childNode of node.children) {
      // 
      if (childNode.enabled) {
        element.appendChild(this._createElement(childNode))
      }
    }
    return element
  }

  /**
   * 
   * @param {string} presetId ID
   * @returns {UIElement}
   */
  add(presetId) {
    const element = UI.createElement(presetId)
    UI.root.appendChild(element)
    return element
  }

  /**  */
  update() {
    UI.manager.update()
    UI.updateKeyTurbo()
  }

  /**  */
  render() {
    UI.root.draw()
  }

  /**  */
  reset() {
    UI.resetFocuses()
    UI.resetPointerEventRoots()
    const {children} = UI.root
    let i = children.length
    // 
    while (--i >= 0) {
      // 
      // 
      children[i]?.destroy()
    }
  }

  /**
   * (ID)
   * @param {string} presetId ID
   * @returns {UIElement|undefined}
   */
  get(presetId) {
    return this.idMap[presetId]
  }

  /**
   * 
   * @returns {UIElement}
   */
  getPointerEventRoot() {
    const roots = this.pointerEventRoots
    return roots[roots.length - 1] ?? this.root
  }

  /**
   * 
   * @param {UIElement} element 
   */
  addPointerEventRoot(element) {
    if (element instanceof UIElement) {
      this.pointerEventRoots.append(element)
    }
  }

  /**
   * 
   * @param {UIElement} element 
   */
  removePointerEventRoot(element) {
    if (element instanceof UIElement) {
      this.pointerEventRoots.remove(element)
    }
  }

  /**  */
  removeLatestPointerEventRoot() {
    const roots = this.pointerEventRoots
    this.removePointerEventRoot(roots[roots.length - 1])
  }

  /**  */
  resetPointerEventRoots() {
    this.pointerEventRoots.length = 0
  }

  /**
   * ()
   * @param {UIElement[]} elements 
   * @param {number} x X
   * @param {number} y Y
   * @returns {UIElement|undefined}
   */
  find(elements, x, y) {
    // 
    for (let i = elements.length - 1; i >= 0; i--) {
      const element = elements[i]
      if (element.visible) {
        switch (element.pointerEvents) {
          case 'enabled':
            // 
            if (element.isPointIn(x, y)) {
              return this.find(element.children, x, y) ?? element
            }
            continue
          case 'skipped':
            // 
            if (element.isPointIn(x, y)) {
              const target = this.find(element.children, x, y)
              if (target) return target
            }
            continue
          case 'disabled':
            continue
        }
      }
    }
    return undefined
  }

  /**
   * 
   * @returns {UIElement}
   */
  getElementAtMouse() {
    const root = UI.getPointerEventRoot()
    return UI.find(
      root.children,
      Input.mouse.screenX,
      Input.mouse.screenY,
    ) ?? root
  }

  /**
   * ()
   * UI
   * 
   * @param {UIElement} target
   */
  _updateBubbleState(target) {
    if (target !== UI.root &amp;&amp;
      target instanceof UIElement) {
      Input.bubbles.stop()
    }
  }

  /** hover */
  checkIfRemovedHover(element) {
    let hover = this.hover
    // hover
    // 
    if (element.contains(hover)) {
      this.hover = null
      const {parent} = element
      do {
        hover.emit('mouseleave', false)
        hover = hover.parent
      } while (hover !== parent)
    }
  }

  // 
  addFocus(element) {
    if (element instanceof UIElement &amp;&amp;
      this.focuses.append(element)) {
      const focuses = this.focuses
      const focus = focuses[focuses.length - 2]
      this.getSelectedButton(focus)?.updateDisplayMode()
      this.selectDefaultButton()
      element.emit('focus', false)
    }
  }

  // 
  removeFocus(element) {
    if (this.focuses.remove(element)) {
      this.restoreFocusedButtons(element)
      const focuses = this.focuses
      const focus = focuses[focuses.length - 1]
      this.getSelectedButton(focus)?.updateDisplayMode()
      element.emit('blur', false)
    }
  }

  // 
  removeLatestFocus() {
    const focuses = this.focuses
    this.removeFocus(focuses[focuses.length - 1])
  }

  // 
  getFocus() {
    const focuses = this.focuses
    return focuses[focuses.length - 1]
  }

  // 
  resetFocuses() {
    while (this.focuses.length !== 0) {
      this.removeLatestFocus()
    }
  }

  // 
  getSelectedButton(focusOrButtons) {
    let buttons
    if (focusOrButtons instanceof UIElement) {
      if (!this.focuses.includes(focusOrButtons)) return
      buttons = this.getFocusedButtons(focusOrButtons, true)
    } else if (focusOrButtons instanceof Array) {
      buttons = focusOrButtons
    } else {
      return
    }
    for (const button of buttons) {
      if (button.selected) {
        return button
      }
    }
    return undefined
  }

  // 
  getIndexOfSelectedButton(focus) {
    if (focus instanceof UIElement) {
      const buttons = this.getFocusedButtons(focus, true)
      const button = this.getSelectedButton(buttons)
      return buttons.indexOf(button)
    }
    return -1
  }

  // 
  getFocusedButtons(focus = null, allowActive = false) {
    if (!focus) {
      const focuses = this.focuses
      const length = focuses.length
      if (length === 0) {
        return Array.empty
      }
      focus = focuses[length - 1]
    }
    let invalid = false
    const fetch = (elements, mode) => {
      for (const element of elements) {
        if (element instanceof ButtonElement) {
          // 
          if (allowActive === false &amp;&amp;
            element.state === 'active') {
            invalid = true
            return
          }
          buttons.push(element)
        }
        if (mode === 'control-descendant-buttons') {
          fetch(element.children, mode)
        }
      }
    }
    const buttons = []
    fetch(focus.children, focus.focusMode)
    return invalid ? Array.empty : buttons
  }

  // 
  restoreFocusedButtons(focus = null, exclusion = null) {
    const buttons = this.getFocusedButtons(focus, true)
    for (const button of buttons) {
      if (button !== exclusion) {
        button.restore()
      }
    }
  }

  // 
  restoreRelatedButtons(button) {
    for (const focus of this.focuses) {
      if (focus.contains(button)) {
        this.restoreFocusedButtons(focus, button)
        return
      }
    }
  }

  // 
  selectButton(button) {
    if (button instanceof ButtonElement) {
      const focuses = this.focuses
      for (let i = focuses.length - 1; i >= 0; i--) {
        const focus = focuses[i]
        if (focus.focusMode === 'control-descendant-buttons'
        ? focus.contains(button)
        : focus === button.parent) {
          this.restoreFocusedButtons(focus, button)
          break
        }
      }
      button.hover()
    }
  }

  // 
  selectDefaultButton() {
    const buttons = this.getFocusedButtons()
    // 
    if (!this.getSelectedButton(buttons)) {
      buttons[0]?.hover(false)
    }
  }

  // 
  selectButtonByAngle(angle) {
    const buttons = this.getFocusedButtons()
    const length = buttons.length
    if (length === 0) {
      return
    }
    const selected = this.getSelectedButton(buttons)
    if (!selected) {
      return buttons[0]?.hover(true)
    }

    // 
    const ANGLE_TOLERANCE = Math.PI / 3
    const ANGLE_WEIGHT = 1.25
    const costs = []
    const set = {}
    const sx = selected.x + selected.width / 2
    const sy = selected.y + selected.height / 2
    for (const button of buttons) {
      if (button === selected) {
        continue
      }
      const dx = button.x + button.width / 2
      const dy = button.y + button.height / 2
      const da = Math.atan2(dy - sy, dx - sx)
      let ra = Math.modRadians(da - angle)
      if (ra > ANGLE_TOLERANCE) {
        ra = Math.modRadians(angle - da)
        if (ra > ANGLE_TOLERANCE) {
          continue
        }
      }
      const distance = Math.dist(sx, sy, dx, dy)
      const cost = Math.round(distance * (Math.cos(ra) + Math.sin(ra) * ANGLE_WEIGHT))
      costs.push(cost)
      set[cost] = button
    }

    // 
    if (costs.length > 0) {
      let minCost = Infinity
      for (const cost of costs) {
        if (minCost > cost) {
          minCost = cost
        }
      }
      selected.restore()
      set[minCost].hover(true)
    }
  }

  // 
  selectButtonByDirKey(dirKey) {
    switch (dirKey) {
      case 'Up':
        this.selectButtonByAngle(-Math.PI / 2)
        break
      case 'Down':
        this.selectButtonByAngle(Math.PI / 2)
        break
      case 'Left':
        this.selectButtonByAngle(Math.PI)
        break
      case 'Right':
        this.selectButtonByAngle(0)
        break
    }
  }

  // 
  pressDirKey(dirKey) {
    if (this.focuses.length === 0) return
    if (this.dirKey !== dirKey) {
      this.dirKey = dirKey
      this.turbo = false
      this.turboElapsed = 0
      this.selectButtonByDirKey(dirKey)
    }
  }

  // 
  releaseDirKey(dirKey) {
    if (this.dirKey === dirKey) {
      this.dirKey = ''
      this.turbo = false
      this.turboElapsed = 0
    }
  }

  // 
  pressConfirmKey() {
    const buttons = this.getFocusedButtons()
    const button = this.getSelectedButton(buttons)
    if (button instanceof ButtonElement) {
      button.emit('click')
    }
  }

  // 
  updateKeyTurbo() {
    if (this.dirKey === '') return
    this.turboElapsed += Time.rawDeltaTime
    switch (this.turbo) {
      case false:
        if (this.turboElapsed >= 500) {
          this.turboElapsed -= 500
          this.turbo = true
          this.selectButtonByDirKey(this.dirKey)
        }
        break
      case true:
        if (this.turboElapsed >= 100) {
          this.turboElapsed -= 100
          this.selectButtonByDirKey(this.dirKey)
        }
        break
    }
  }

  /**
   * 
   * @param {string} type 
   * @param {function} listener 
   * @param {boolean} [priority = false] 
   */
  on(type, listener, priority = false) {
    const list = this.listeners[type]
    if (!list.includes(listener)) {
      if (priority) {
        list.unshift(listener)
      } else {
        list.push(listener)
      }
    }
  }

  /**
   * ()
   * @param {string} type 
   * @param {function} listener 
   */
  off(type, listener) {
    const group = this.listeners[type]
    const index = group.indexOf(listener)
    if (index !== -1) {
      const replacer = () => {}
      group[index] = replacer
      Callback.push(() => {
        group.remove(replacer)
      })
    }
  }

  /**  */
  resize() {
    UI.root.resize()
  }

  /**  */
  keydown() {
    if (UI.focuses.length !== 0) {
      switch (Input.event.code) {
        case 'ArrowUp':
          Input.bubbles.stop()
          UI.pressDirKey('Up')
          break
        case 'ArrowDown':
          Input.bubbles.stop()
          UI.pressDirKey('Down')
          break
        case 'ArrowLeft':
          Input.bubbles.stop()
          UI.pressDirKey('Left')
          break
        case 'ArrowRight':
          Input.bubbles.stop()
          UI.pressDirKey('Right')
          break
        case 'Enter':
        case 'NumpadEnter':
        case 'Space':
          Input.bubbles.stop()
          UI.pressConfirmKey()
          break
        case 'Escape': {
          const element = UI.getFocus()
          if (element.focusCancelable) {
            Input.bubbles.stop()
            UI.removeLatestFocus()
          }
          break
        }
      }
      // 
      UI.getFocus()?.emit('keydown', false)
    }
  }

  /**  */
  keyup() {
    if (UI.focuses.length !== 0) {
      switch (Input.event.code) {
        case 'ArrowUp':
          Input.bubbles.stop()
          UI.releaseDirKey('Up')
          break
        case 'ArrowDown':
          Input.bubbles.stop()
          UI.releaseDirKey('Down')
          break
        case 'ArrowLeft':
          Input.bubbles.stop()
          UI.releaseDirKey('Left')
          break
        case 'ArrowRight':
          Input.bubbles.stop()
          UI.releaseDirKey('Right')
          break
      }
      // 
      UI.getFocus()?.emit('keyup', false)
    }
  }

  /**  */
  mousedown() {
    if (Input.event.button === 2 &amp;&amp;
      UI.getFocus()?.focusCancelable) {
      UI.removeLatestFocus()
      Input.bubbles.stop()
      return
    }
    const target = UI.getElementAtMouse()
    target.emit('mousedown', true)
    UI._updateBubbleState(target)
  }

  /**  */
  mousedownLB() {
    UI.target = UI.getElementAtMouse()
    UI.target.emit('mousedownLB', true)
    UI._updateBubbleState(UI.target)
  }

  /**  */
  mousedownRB() {
    const target = UI.getElementAtMouse()
    target.emit('mousedownRB', true)
    UI._updateBubbleState(target)
  }

  /**  */
  mouseup() {
    const target = UI.getElementAtMouse()
    target.emit('mouseup', true)
    UI._updateBubbleState(target)
  }

  /**  */
  mouseupLB() {
    const target = UI.getElementAtMouse()
    target.emit('mouseupLB', true)
    if (UI.target?.contains(target)) {
      Input.bubbles.push(true)
      target.emit('click', true)
      Input.bubbles.pop()
    }
    UI.target = null
    UI._updateBubbleState(target)
  }

  /**  */
  mouseupRB() {
    const target = UI.getElementAtMouse()
    target.emit('mouseupRB', true)
    UI._updateBubbleState(target)
  }

  /**  */
  mousemove() {
    const last = UI.hover
    const hover = UI.getElementAtMouse()
    if (last !== hover) {
      if (last !== null &amp;&amp; !last.contains(hover)) {
        let element = last
        do {
          element.emit('mouseleave', false)
          element = element.parent
        } while (element !== null &amp;&amp; element !== hover)
      }
      if (hover !== null &amp;&amp; !hover.contains(last)) {
        let element = hover
        do {
          element.emit('mouseenter', false)
          element = element.parent
        } while (element !== null &amp;&amp; element !== last)
      }
      UI.hover = hover
    }
    hover.emit('mousemove', true)
    UI._updateBubbleState(hover)
  }

  /**  */
  mouseleave() {
    if (UI.hover !== null) {
      UI.hover.emit('mouseleave', true)
      UI.hover = null
    }
  }

  /**  */
  doubleclick() {
    if (UI.target !== null) {
      UI.target.emit('doubleclick', true)
      UI._updateBubbleState(UI.target)
    }
  }

  /**  */
  wheel() {
    if (UI.hover !== null) {
      UI.hover.emit('wheel', true)
      UI._updateBubbleState(UI.hover)
    }
  }

  /**  */
  gamepadbuttonpress() {
    if (UI.focuses.length !== 0) {
      switch (Controller.buttonName) {
        case 'Up':
          Input.bubbles.stop()
          UI.pressDirKey('Up')
          break
        case 'Down':
          Input.bubbles.stop()
          UI.pressDirKey('Down')
          break
        case 'Left':
          Input.bubbles.stop()
          UI.pressDirKey('Left')
          break
        case 'Right':
          Input.bubbles.stop()
          UI.pressDirKey('Right')
          break
        case 'A':
          Input.bubbles.stop()
          UI.pressConfirmKey()
          break
        case 'B': {
          const element = UI.getFocus()
          if (element.focusCancelable) {
            Input.bubbles.stop()
            UI.removeLatestFocus()
          }
          break
        }
      }
      // 
      UI.getFocus()?.emit('gamepadbuttonpress', false)
    }
  }

  /**  */
  gamepadbuttonrelease() {
    if (UI.focuses.length !== 0) {
      switch (Controller.buttonName) {
        case 'Up':
          Input.bubbles.stop()
          UI.releaseDirKey('Up')
          break
        case 'Down':
          Input.bubbles.stop()
          UI.releaseDirKey('Down')
          break
        case 'Left':
          Input.bubbles.stop()
          UI.releaseDirKey('Left')
          break
        case 'Right':
          Input.bubbles.stop()
          UI.releaseDirKey('Right')
          break
      }
      // 
      UI.getFocus()?.emit('gamepadbuttonrelease', false)
    }
  }

  /**  */
  gamepadleftstickchange() {
    const stickAngle = Controller.states.LeftStickAngle
    if (stickAngle !== -1) {
      let stickDir = ''
      switch (Math.floor(Math.modDegrees(stickAngle + 45) / 90)) {
        case 0:
          stickDir = 'Right'
          break
        case 1:
          stickDir = 'Down'
          break
        case 2:
          stickDir = 'Left'
          break
        case 3:
          stickDir = 'Up'
          break
      }
      // stickDir
      if (Controller.stickDir !== stickDir) {
        Controller.stickDir = stickDir
        UI.pressDirKey(stickDir)
      }
    } else {
      UI.releaseDirKey(Controller.stickDir)
      Controller.stickDir = ''
    }
    UI.getFocus()?.emit('gamepadleftstickchange', false)
  }

  /**  */
  gamepadrightstickchange() {
    UI.getFocus()?.emit('gamepadrightstickchange', false)
  }
}

// ********************************  ********************************

class UIElement {
  /** ID
   *  @type {string}
   */ presetId

  /** 
   *  @type {string}
   */ name

  /** ()
   *  @type {number}
   */ x

  /** ()
   *  @type {number}
   */ y

  /** ()
   *  @type {number}
   */ width

  /** ()
   *  @type {number}
   */ height

  /** 
   *  @type {Matrix}
   */ matrix

  /** ()
   *  @type {number}
   */ opacity

  /** 
   *  @type {Object}
   */ transform

  /** 
   *  @type {UIElement|null}
   */ parent

  /** 
   *  @type {Array&lt;UIElement>}
   */ children

  /** 
   *  @type {boolean}
   */ visible

  /** 
   *  @type {boolean}
   */ connected

  /** 
   *  @type {boolean}
   */ pointerEvents

  /** 
   *  @type {Object}
   */ attributes

  /** 
   *  @type {ModuleList}
   */ updaters

  /** 
   *  @type {Object}
   */ events

  /** 
   *  @type {Script}
   */ script

  // 
  static defaultData = {
    presetId: '',
    name: '',
    pointerEvents: 'enabled',
    events: [],
    scripts: [],
    transform: {
      anchorX: 0,
      anchorY: 0,
      x: 0,
      x2: 0,
      y: 0,
      y2: 0,
      width: 0,
      width2: 0,
      height: 0,
      height2: 0,
      rotation: 0,
      scaleX: 1,
      scaleY: 1,
      skewX: 0,
      skewY: 0,
      opacity: 1,
    },
  }

  /**
   * @param {Object} data 
   */
  constructor(data) {
    this.presetId = data.presetId
    this.name = data.name
    this.x = 0
    this.y = 0
    this.width = 0
    this.height = 0
    this.matrix = new Matrix()
    this.opacity = 1
    this.transform = {...data.transform}
    this.parent = null
    this.children = []
    this.visible = true
    this.connected = false
    this.pointerEvents = data.pointerEvents
    this.attributes = {}
    this.updaters = new ModuleList()
    this.events = data.events
    this.script = Script.create(this, data.scripts)
    UI.latest = this

    // ID->
    if (this.presetId) {
      UI.idMap[this.presetId] = this
    }
  }

  /**  */
  connect() {
    // 
    UI.manager.append(this)
    this.connected = true
    this.connectChildren()
  }

  /**  */
  disconnect() {
    // 
    UI.manager.remove(this)
    this.connected = false
    this.disconnectChildren()
  }

  /**  */
  connectChildren() {
    const children = this.children
    const length = children.length
    for (let i = 0; i &lt; length; i++) {
      children[i].connect()
    }
  }

  /**  */
  disconnectChildren() {
    const children = this.children
    const length = children.length
    for (let i = 0; i &lt; length; i++) {
      children[i].disconnect()
    }
  }

  /**  */
  drawChildren() {
    const children = this.children
    const length = children.length
    for (let i = 0; i &lt; length; i++) {
      children[i].draw()
    }
  }

  /**  */
  resizeChildren() {
    const children = this.children
    const length = children.length
    for (let i = 0; i &lt; length; i++) {
      children[i].resize()
    }
  }

  /**  */
  destroyChildren() {
    const children = this.children
    let i = children.length
    while (--i >= 0) {
      children[i]?.destroy()
    }
  }

  /**
   * 
   * @param {UIElement[]} elements 
   */
  appendChildren(elements) {
    for (const element of elements) {
      this.appendChild(element)
    }
  }

  /**
   * 
   * @param {UIElement} element 
   */
  appendChild(element) {
    // ()
    if (element &amp;&amp; this.children.append(element)) {
      // 
      element.parent?.children.remove(element)
      element.parent = this
      // 
      if (this.connected) {
        // 
        !element.connected &amp;&amp;
        element.connect()
        element.resize()
      } else {
        // 
        element.connected &amp;&amp;
        element.disconnect()
      }
    }
  }

  /**
   * 
   * @param {UIElement} element 
   * @param {UIElement} destination 
   */
  insertBefore(element, destination) {
    if (!element) return
    const pos = this.children.indexOf(destination)
    if (pos !== -1 &amp;&amp; !this.children.includes(element)) {
      this.children.splice(pos, 0, element)
      // 
      element.parent?.children.remove(element)
      element.parent = this
      // 
      if (this.connected) {
        // 
        !element.connected &amp;&amp;
        element.connect()
        element.resize()
      } else {
        // 
        element.connected &amp;&amp;
        element.disconnect()
      }
    }
  }

  /**
   * 
   * @param {number} pos 
   */
  moveToIndex(pos) {
    const {parent} = this
    if (parent) {
      const elements = parent.children
      const length = elements.length
      // 
      if (pos &lt; 0) pos += length
      if (elements[pos] !== this &amp;&amp;
        elements[pos] !== undefined) {
        const index = elements.indexOf(this)
        const step = index &lt; pos ? 1 : -1
        // 
        for (let i = index; i !== pos; i += step) {
          elements[i] = elements[i + step]
        }
        elements[pos] = this
        // 
        if (parent instanceof WindowElement) {
          parent.requestResizing()
        }
      }
    }
  }

  /**  */
  remove() {
    if (this.parent?.children.remove(this)) {
      UI.checkIfRemovedHover(this)
      if (this.parent instanceof WindowElement) {
        this.parent.requestResizing()
      }
      this.parent = null
      if (this.connected) {
        this.disconnect()
      }
    }
  }

  /**
   * 
   * @returns {UIElement}
   */
  clear() {
    const {children} = this
    let i = children.length
    while (--i >= 0) {
      children[i]?.destroy()
    }
    return this
  }

  /**
   * 
   * @returns {UIElement}
   */
  hide() {
    if (this.visible) {
      this.visible = false
    }
    return this
  }

  /**
   * 
   * @returns {UIElement}
   */
  show() {
    if (!this.visible) {
      this.visible = true
      this.resize()
    }
    return this
  }

  /**  */
  calculatePosition() {
    // 
    if (this.connected === false) {
      return
    }

    const parent = this.parent
    const matrix = this.matrix.set(parent.matrix)
    const transform = this.transform
    const parentWidth = parent.width
    const parentHeight = parent.height
    const x = parent.x + transform.x + transform.x2 * parentWidth
    const y = parent.y + transform.y + transform.y2 * parentHeight
    const width = Math.max(transform.width + transform.width2 * parentWidth, 0)
    const height = Math.max(transform.height + transform.height2 * parentHeight, 0)
    const anchorX = transform.anchorX * width
    const anchorY = transform.anchorY * height
    const rotation = transform.rotation
    const scaleX = transform.scaleX
    const scaleY = transform.scaleY
    const skewX = transform.skewX
    const skewY = transform.skewY
    const opacity = transform.opacity * parent.opacity

    // 
    this.x = x - anchorX
    this.y = y - anchorY
    this.width = width
    this.height = height
    this.opacity = opacity

    // 
    if (rotation !== 0) {
      matrix.rotateAt(x, y, Math.radians(rotation))
    }
    // 
    if (scaleX !== 1 || scaleY !== 1) {
      matrix.scaleAt(x, y, scaleX, scaleY)
    }
    // 
    if (skewX !== 0 || skewY !== 0) {
      matrix.skewAt(x, y, skewX, skewY)
    }
  }

  /**
   * 
   * @param {UIElement} element 
   * @returns {boolean}
   */
  contains(element) {
    while (element) {
      if (element === this) {
        return true
      }
      element = element.parent
    }
    return false
  }

  /**
   * 
   * @returns {boolean}
   */
  isVisible() {
    let element = this
    // 
    // false
    while (element) {
      if (!element.visible) {
        return false
      }
      element = element.parent
    }
    return true
  }

  /**
   * 
   * @param {number} x X
   * @param {number} y Y
   * @returns {boolean}
   */
  isPointIn(x, y) {
    const W = this.width
    const H = this.height
    // 0false
    if (W * H === 0) {
      return false
    }

    const matrix = this.matrix
    const L = this.x
    const T = this.y
    const R = L + W
    const B = T + H
    const a = matrix[0]
    const b = matrix[1]
    const c = matrix[3]
    const d = matrix[4]
    const e = matrix[6]
    const f = matrix[7]
    const x1 = a * L + c * T + e - x
    const y1 = b * L + d * T + f - y
    const x2 = a * L + c * B + e - x
    const y2 = b * L + d * B + f - y
    const x3 = a * R + c * B + e - x
    const y3 = b * R + d * B + f - y
    const x4 = a * R + c * T + e - x
    const y4 = b * R + d * T + f - y
    const cross1 = x1 * y2 - y1 * x2
    const cross2 = x2 * y3 - y2 * x3
    const cross3 = x3 * y4 - y3 * x4
    const cross4 = x4 * y1 - y4 * x1
    return (
      cross1 * cross2 >= 0 &amp;&amp;
      cross2 * cross3 >= 0 &amp;&amp;
      cross3 * cross4 >= 0 &amp;&amp;
      cross4 * cross1 >= 0
    )
  }

  /**
   * 
   * @param {Object} transformProps 
   */
  set(transformProps) {
    for (const key of Object.keys(transformProps)) {
      this.transform[key] = transformProps[key]
    }
    this.resize()
  }

  /**
   * 
   * @param {Object} transformProps 
   * @param {string} [easingId] ID
   * @param {number} [duration] ()
   */
  move(transformProps, easingId, duration) {
    // 
    const propEntries = Object.entries(transformProps)
    // 
    const {updaters} = this
    let transitions = updaters.get('move')
    // 
    if (transitions) {
      let ti = transitions.length
      while (--ti >= 0) {
        // 
        const updater = transitions[ti]
        const entries = updater.entries
        let ei = entries.length
        while (--ei >= 0) {
          const key = entries[ei][0]
          for (const property of propEntries) {
            // 
            if (property[0] === key) {
              entries.splice(ei, 1)
              if (entries.length === 0) {
                transitions.splice(ti, 1)
              }
              break
            }
          }
        }
      }
    }

    // 
    if (duration > 0) {
      if (!transitions) {
        // 
        transitions = this.transitions = new ModuleList()
        updaters.set('move', transitions)
      }
      const transform = this.transform
      const length = propEntries.length
      const entries = new Array(length)
      for (let i = 0; i &lt; length; i++) {
        const [key, end] = propEntries[i]
        const start = transform[key]
        entries[i] = [key, start, end]
      }
      let elapsed = 0
      const easing = Easing.get(easingId)
      // 
      const updater = transitions.add({
        entries: entries,
        update: deltaTime => {
          elapsed += deltaTime
          const time = easing.map(elapsed / duration)
          for (const [key, start, end] of entries) {
            transform[key] = start * (1 - time) + end * time
          }
          // 
          if (transform.opacity > 1) {
            transform.opacity = 1
          }
          // 
          const last = transitions.length - 1
          if (updater === transitions[last]) {
            this.resize()
          }
          // 
          if (elapsed >= duration) {
            Callback.push(() => {
              transitions.remove(updater)
              // 
              if (transitions.length === 0) {
                updaters.delete('move')
              }
            })
          }
        }
      })
    } else {
      // 
      const transform = this.transform
      for (const [key, value] of propEntries) {
        transform[key] = value
      }
      this.resize()
      // 
      if (transitions?.length === 0) {
        updaters.deleteDelay('move')
      }
    }
  }

  /**
   * 
   * @param {string} key 
   * @param {any} value 
   * @returns {UIElement|undefined}
   */
  query(key, value) {
    // 
    for (const element of this.children) {
      if (element[key] === value) return element
    }
    // 
    for (const element of this.children) {
      const target = element.query(key, value)
      if (target !== undefined) return target
    }
    return undefined
  }

  /**
   * 
   * @param {string} type 
   * @param {boolean} [bubble] 
   * @returns {EventHandler|undefined}
   */
  callEvent(type, bubble = false) {
    const commands = this.events[type]
    if (commands) {
      const event = new EventHandler(commands)
      event.priority = true
      event.bubble = bubble
      event.triggerElement = this
      EventHandler.call(event, this.updaters)
      return event
    }
  }

  /**
   * 
   * @param {string} type 
   * @param {boolean} [bubble] 
   */
  emit(type, bubble = false) {
    this.callEvent(type, bubble)
    this.script.emit(type, this)
    // 
    if (bubble &amp;&amp; Input.bubbles.get()) {
      this.parent?.emit(type, bubble)
    }
  }

  /**  */
  destroy() {
    if (this.connected) {
      this.remove()
    }
    this.emit('destroy', false)
    // (ID)
    const {idMap} = UI
    const {presetId} = this
    if (idMap[presetId] === this) {
      delete idMap[presetId]
    }
    // ()
    UI.removeFocus(this)
    UI.removePointerEventRoot(this)
    this.destroyChildren()
  }
}

// ********************************  ********************************

class RootElement extends UIElement {
  constructor() {
    super({
      presetId: '',
      name: '',
      pointerEvents: 'enabled',
      events: {},
      scripts: [],
    })
    this.connected = true
  }

  /**  */
  draw() {
    this.drawChildren()
  }

  /**  */
  resize() {
    this.x = 0
    this.y = 0
    this.width = GL.width
    this.height = GL.height
    this.resizeChildren()
  }

  /** () */
  emit() {}
}

// ********************************  ********************************

class ImageElement extends UIElement {
  /** 
   *  @type {ImageTexture|null}
   */ texture

  /** 
   *  @type {string}
   */ flip

  /** 
   *  @type {number}
   */ shiftX

  /** 
   *  @type {number}
   */ shiftY

  /** 
   *  @type {number}
   */ border

  /** 
   *  @type {Array&lt;number>}
   */ clip

  /** 
   *  @type {Array&lt;number>}
   */ tint

  /** 
   *  @type {string}
   */ blend

  _image    //:string
  _display  //:string

  // 
  static sharedFloat64Array = new Float64Array(4)

  // 
  static defaultData = {
    image: '',
    display: 'stretch',
    flip: 'none',
    blend: 'normal',
    shiftX: 0,
    shiftY: 0,
    clip: [0, 0, 32, 32],
    border: 1,
    tint: [0, 0, 0, 0],
    ...UIElement.defaultData,
  }

  /**
   * @param {Object} data 
   */
  constructor(data = ImageElement.defaultData) {
    super(data)
    this.texture = null
    this.image = data.image
    this.display = data.display
    this.flip = data.flip
    this.shiftX = data.shiftX
    this.shiftY = data.shiftY
    this.border = data.border
    this.clip = [...data.clip]
    this.tint = [...data.tint]
    this.blend = data.blend
    this.emit('create')
  }

  /**
   * IDHTML
   * @type {string|HTMLImageElement}
   */
  get image() {
    return this._image
  }

  set image(value) {
    if (this._image !== value) {
      this._image = value
      // 
      if (this.texture) {
        this.texture.destroy()
        this.texture = null
      }
      if (value) {
        this.texture = new ImageTexture(value)
      }
    }
  }

  /**
   * 
   * @type {string}
   */
  get display() {
    return this._display
  }

  set display(value) {
    this._display = value
  }

  /**
   * Base64
   * @param {string} base64
   */
  loadBase64(base64) {
    if (GL.textureManager.images[base64]) {
      this.image = base64
    } else {
      const image = new Image()
      image.onload = () => {
        image.guid = base64
        this.image = image
      }
      image.src = base64
    }
  }

  /**
   * 
   * @param {string|HTMLImageElement} image IDHTML
   * @param {Array&lt;number>} clip 
   */
  setImageClip(image, clip) {
    this.image = image
    this.display = 'clip'
    this.clip[0] = clip[0]
    this.clip[1] = clip[1]
    this.clip[2] = clip[2]
    this.clip[3] = clip[3]
  }

  /**
   * 
   * @param {Object} tint {red?: -255~255, green?: -255~255, blue?: -255~255, gray?: 0~255}
   * @param {string} [easingId] ID
   * @param {number} [duration] ()
   */
  setTint(tint, easingId, duration) {
    const {red, green, blue, gray} = tint
    const {updaters} = this
    if (duration > 0) {
      let elapsed = 0
      const start = Array.from(this.tint)
      const easing = Easing.get(easingId)
      updaters.set('tint', {
        update: deltaTime => {
          elapsed += deltaTime
          const time = easing.map(elapsed / duration)
          const tint = this.tint
          if (Number.isFinite(red)) {
            tint[0] = Math.clamp(start[0] * (1 - time) + red * time, -255, 255)
          }
          if (Number.isFinite(green)) {
            tint[1] = Math.clamp(start[1] * (1 - time) + green * time, -255, 255)
          }
          if (Number.isFinite(blue)) {
            tint[2] = Math.clamp(start[2] * (1 - time) + blue * time, -255, 255)
          }
          if (Number.isFinite(gray)) {
            tint[3] = Math.clamp(start[3] * (1 - time) + gray * time, 0, 255)
          }
          // 
          if (elapsed >= duration) {
            updaters.deleteDelay('tint')
          }
        }
      })
    } else {
      if (Number.isFinite(red)) this.tint[0] = red
      if (Number.isFinite(green)) this.tint[1] = green
      if (Number.isFinite(blue)) this.tint[2] = blue
      if (Number.isFinite(gray)) this.tint[3] = gray
      // 
      if (updaters.get('tint')) {
        updaters.deleteDelay('tint')
      }
    }
  }

  /**  */
  draw() {
    if (this.visible === false) {
      return
    }

    // 
    const {texture} = this
    if (texture?.complete) draw: {
      let dx = this.x
      let dy = this.y
      let dw = this.width
      let dh = this.height
      if (this.blend === 'mask') {
        if (GL.maskTexture.binding) {
          break draw
        }
        if (GL.depthTest) {
          GL.disable(GL.DEPTH_TEST)
        }
        GL.maskTexture.binding = this
        GL.bindFBO(GL.maskTexture.fbo)
        GL.alpha = 1
        GL.blend = 'normal'
      } else {
        GL.alpha = this.opacity
        GL.blend = this.blend
      }
      GL.matrix.set(this.matrix)
      // 
      switch (this.display) {
        case 'stretch':
          texture.clip(this.shiftX, this.shiftY, texture.base.width, texture.base.height)
          break
        case 'tile':
          texture.clip(this.shiftX, this.shiftY, this.width, this.height)
          break
        case 'clip':
          texture.clip(...this.clip)
          break
        case 'slice':
          GL.drawSliceImage(texture, dx, dy, dw, dh, this.clip, this.border, this.tint)
          break draw
      }
      // 
      switch (this.flip) {
        case 'none':
          break
        case 'horizontal':
          dx += dw
          dw *= -1
          break
        case 'vertical':
          dy += dh
          dh *= -1
          break
        case 'both':
          dx += dw
          dy += dh
          dw *= -1
          dh *= -1
          break
      }
      GL.drawImage(texture, dx, dy, dw, dh, this.tint)
    }

    // 
    if (GL.maskTexture.binding === this) {
      GL.unbindFBO()
      if (GL.depthTest) {
        GL.enable(GL.DEPTH_TEST)
      }
      GL.masking = true
      this.drawChildren()
      GL.masking = false
      GL.maskTexture.binding = null
      // 
      const [x1, y1, x2, y2] = this.computeBoundingRectangle()
      const sl = Math.max(Math.floor(x1 - 1), 0)
      const st = Math.max(Math.floor(y1 - 1), 0)
      const sr = Math.min(Math.ceil(x2 + 1), GL.maskTexture.width)
      const sb = Math.min(Math.ceil(y2 + 1), GL.maskTexture.height)
      const sw = sr - sl
      const sh = sb - st
      if (sw > 0 &amp;&amp; sh > 0) {
        GL.bindFBO(GL.maskTexture.fbo)
        GL.enable(GL.SCISSOR_TEST)
        GL.scissor(sl, st, sw, sh)
        GL.clearColor(0, 0, 0, 0)
        GL.clear(GL.COLOR_BUFFER_BIT)
        GL.disable(GL.SCISSOR_TEST)
        GL.unbindFBO()
      }
    } else {
      this.drawChildren()
    }
  }

  /**  */
  resize() {
    if (this.visible) {
      if (this.parent instanceof WindowElement) {
        return this.parent.requestResizing()
      }
      this.calculatePosition()
      this.resizeChildren()
    }
  }

  /**  */
  destroy() {
    this.texture?.destroy()
    return super.destroy()
  }

  // 
  computeBoundingRectangle() {
    const matrix = this.matrix
    const L = this.x
    const T = this.y
    const R = L + this.width
    const B = T + this.height
    const a = matrix[0]
    const b = matrix[1]
    const c = matrix[3]
    const d = matrix[4]
    const e = matrix[6]
    const f = matrix[7]
    const x1 = a * L + c * T + e
    const y1 = b * L + d * T + f
    const x2 = a * L + c * B + e
    const y2 = b * L + d * B + f
    const x3 = a * R + c * B + e
    const y3 = b * R + d * B + f
    const x4 = a * R + c * T + e
    const y4 = b * R + d * T + f
    const vertices = ImageElement.sharedFloat64Array
    vertices[0] = Math.min(x1, x2, x3, x4)
    vertices[1] = Math.min(y1, y2, y3, y4)
    vertices[2] = Math.max(x1, x2, x3, x4)
    vertices[3] = Math.max(y1, y2, y3, y4)
    return vertices
  }
}

// ********************************  ********************************

class TextElement extends UIElement {
  /** 
   *  @type {Texture|null}
   */ texture

  /** 
   *  @type {Printer|null}
   */ printer

  /** 
   *  @type {boolean}
   */ wordWrap

  /** 
   *  @type {boolean}
   */ truncate

  /** 
   *  @type {number}
   */ textWidth

  /** 
   *  @type {number}
   */ textHeight

  /** 
   *  @type {string}
   */ blend

  // 
  _direction        //:string
  _horizontalAlign  //:string
  _verticalAlign    //:string
  _content          //:string
  _rawContent       //:string
  _size             //:number
  _style            //:string
  _weight           //:string
  _lineSpacing      //:number
  _letterSpacing    //:number
  _color            //:string
  _font             //:string
  _typeface         //:string
  _effect           //:object
  _overflow         //:string
  _textOuterX       //:number
  _textOuterY       //:number
  _textOuterWidth   //:number
  _textOuterHeight  //:number

  // 
  static defaultData = {
    direction: 'horizontal-tb',
    horizontalAlign: 'left',
    verticalAlign: 'middle',
    content: 'New Text',
    size: 16,
    lineSpacing: 0,
    letterSpacing: 0,
    color: 'ffffffff',
    font: '',
    typeface: 'regular',
    effect: {type: 'none'},
    overflow: 'visible',
    blend: 'normal',
    ...UIElement.defaultData,
  }

  // 
  static globalVarRegexp = /&lt;global:([0-9a-f]{16})>/g

  // 
  static dynamicGlobalVarRegexp = /&lt;global::([0-9a-f]{16})>/g

  // 
  static compileDynamicTextContent(content) {
    const regexp = this.dynamicGlobalVarRegexp
    if (regexp.test(content)) {
      regexp.lastIndex = 0
      const slices = []
      const setters = []
      let changed = false
      let li = 0
      let match
      while (match = regexp.exec(content)) {
        const mi = match.index
        if (mi > li) {
          slices.push(content.slice(li, mi))
        }
        const index = slices.length
        const key = match[1]
        const setter = () => {
          const value = Variable.get(key)
          if (slices[index] !== value) {
            slices[index] = value
            changed = true
          }
        }
        setters.push(setter)
        slices.push(null)
        li = regexp.lastIndex
      }
      // 
      if (content.length > li) {
        slices.push(content.slice(li))
      }
      return {
        onChange: Function.empty,
        update() {
          for (const setter of setters) {
            setter()
          }
          if (changed) {
            changed = false
            this.onChange(slices.join(''))
          }
        }
      }
    }
    return null
  }

  // 
  static variableTextReplacer = (match, varId) => Variable.get(varId)

  // 
  static parseVariableTextContent(content) {
    return content.replace(this.globalVarRegexp, this.variableTextReplacer)
  }

  /**
   * @param {Object} data 
   */
  constructor(data = TextElement.defaultData) {
    super(data)
    this.texture = null
    this.printer = null
    this.direction = data.direction
    this.horizontalAlign = data.horizontalAlign
    this.verticalAlign = data.verticalAlign
    this.content = TextElement.parseVariableTextContent(data.content)
    this.size = data.size
    this.lineSpacing = data.lineSpacing
    this.letterSpacing = data.letterSpacing
    this.color = data.color
    this.font = data.font
    this.typeface = data.typeface
    this.effect = {...data.effect}
    this.wordWrap = false
    this.truncate = false
    this.overflow = data.overflow
    this.textWidth = 0
    this.textHeight = 0
    this._textOuterX = 0
    this._textOuterY = 0
    this._textOuterWidth = 0
    this._textOuterHeight = 0
    this.blend = data.blend
    this.emit('create')
  }

  /**
   * 
   * @type {string}
   */
  get direction() {
    return this._direction
  }

  set direction(value) {
    if (this._direction !== value) {
      this._direction = value
      if (this.printer) {
        this.printer.reset()
        this.printer.direction = value
      }
    }
  }

  /**
   * 
   * @type {string}
   */
  get horizontalAlign() {
    return this._horizontalAlign
  }

  set horizontalAlign(value) {
    if (this._horizontalAlign !== value) {
      switch (value) {
        case 'left':
        case 'center':
        case 'right':
          break
        default:
          return
      }
      this._horizontalAlign = value
      if (this.printer) {
        this.printer.reset()
        this.printer.horizontalAlign = value
      }
    }
  }

  /**
   * 
   * @type {string}
   */
  get verticalAlign() {
    return this._verticalAlign
  }

  // 
  set verticalAlign(value) {
    if (this._verticalAlign !== value) {
      switch (value) {
        case 'top':
        case 'middle':
        case 'bottom':
          break
        default:
          return
      }
      this._verticalAlign = value
      if (this.printer) {
        this.printer.reset()
        this.printer.verticalAlign = value
      }
    }
  }

  /**
   * 
   * @type {string}
   */
  get content() {
    return this._content
  }

  set content(value) {
    if (typeof value !== 'string') {
      value = value.toString()
    }
    if (this._rawContent !== value) {
      this._rawContent = value
      this._content = Local.replace(value)
      const updater = TextElement.compileDynamicTextContent(this._content)
      if (updater) {
        updater.onChange = content => {
          this._content = content
        }
        this.updaters.set('dynamic-var', updater)
      } else {
        this.updaters.delete('dynamic-var')
      }
    }
  }

  /**
   * 
   * @type {number}
   */
  get size() {
    return this._size
  }

  set size(value) {
    if (this._size !== value) {
      this._size = value
      if (this.printer) {
        this.printer.reset()
        this.printer.sizes[0] = value
      }
    }
  }

  /**
   * 
   * @type {number}
   */
  get lineSpacing() {
    return this._lineSpacing
  }

  set lineSpacing(value) {
    if (this._lineSpacing !== value) {
      this._lineSpacing = value
      if (this.printer) {
        this.printer.reset()
        this.printer.lineSpacing = value
      }
    }
  }

  /**
   * 
   * @type {number}
   */
  get letterSpacing() {
    return this._letterSpacing
  }

  set letterSpacing(value) {
    if (this._letterSpacing !== value) {
      this._letterSpacing = value
      if (this.printer) {
        this.printer.reset()
        this.printer.letterSpacing = value
      }
    }
  }

  /**
   * 
   * @type {string}
   */
  get color() {
    return this._color
  }

  set color(value) {
    if (this._color !== value) {
      this._color = value
      if (this.printer) {
        this.printer.reset()
        this.printer.colors[0] = Color.parseCSSColor(value)
      }
    }
  }

  /**
   * 
   * @type {string}
   */
  get font() {
    return this._font
  }

  set font(value) {
    if (this._font !== value) {
      this._font = value
      if (this.printer) {
        this.printer.reset()
        this.printer.fonts[0] = value || Printer.font
      }
    }
  }

  /**
   * 
   * @type {string}
   */
  get typeface() {
    return this._typeface
  }

  set typeface(value) {
    if (this._typeface !== value) {
      switch (value) {
        case 'regular':
          this._style = 'normal'
          this._weight = 'normal'
          break
        case 'bold':
          this._style = 'normal'
          this._weight = 'bold'
          break
        case 'italic':
          this._style = 'italic'
          this._weight = 'normal'
          break
        case 'bold-italic':
          this._style = 'italic'
          this._weight = 'bold'
          break
        default:
          return
      }
      this._typeface = value
      if (this.printer) {
        this.printer.reset()
        this.printer.styles[0] = this._style
        this.printer.weights[0] = this._weight
      }
    }
  }

  /**
   * 
   * @type {Object}
   */
  get effect() {
    return this._effect
  }

  set effect(value) {
    this._effect = value
    if (this.printer) {
      this.printer.reset()
      this.printer.effects[0] = Printer.parseEffect(value)
    }
  }

  /**
   * 
   * @type {string}
   */
  get overflow() {
    return this._overflow
  }

  set overflow(value) {
    if (this._overflow !== value) {
      this._overflow = value
      switch (value) {
        case 'visible':
          this.wordWrap = false
          this.truncate = false
          break
        case 'wrap':
          this.wordWrap = true
          this.truncate = false
          break
        case 'truncate':
          this.wordWrap = false
          this.truncate = true
          break
        case 'wrap-truncate':
          this.wordWrap = true
          this.truncate = true
          break
      }
      if (this.printer) {
        this.printer.reset()
        this.printer.wordWrap = this.wordWrap
        this.printer.truncate = this.truncate
      }
    }
  }

  /**  */
  update() {
    let printer = this.printer
    if (printer === null) {
      // 
      const texture = new Texture()
      printer = new Printer(texture)
      printer.direction = this.direction
      printer.horizontalAlign = this.horizontalAlign
      printer.verticalAlign = this.verticalAlign
      printer.sizes[0] = this.size
      printer.lineSpacing = this.lineSpacing
      printer.letterSpacing = this.letterSpacing
      printer.colors[0] = Color.parseCSSColor(this.color)
      printer.fonts[0] = this.font || Printer.font
      printer.styles[0] = this._style
      printer.weights[0] = this._weight
      printer.effects[0] = Printer.parseEffect(this.effect)
      printer.wordWrap = this.wordWrap
      printer.truncate = this.truncate
      this.texture = texture
      this.printer = printer
    }
    // 
    // 
    // 
    if (printer.content !== this._content ||
      printer.wordWrap &amp;&amp; (printer.horizontal
      ? printer.printWidth !== this.width
      : printer.printHeight !== this.height) ||
      printer.truncate &amp;&amp; (printer.horizontal
      ? printer.printHeight !== this.height
      : printer.printWidth !== this.width)) {
      // 
      if (printer.content) {
        printer.reset()
      }
      // 
      printer.printWidth = this.width
      printer.printHeight = this.height
      printer.draw(this._content)
      this.calculateTextPosition()
    }
  }

  // 
  updateTextContent() {
    const content = this._rawContent
    this._rawContent = ''
    this.content = content
  }

  /**  */
  draw() {
    if (this.visible === false) {
      return
    }

    // 
    this.update()

    // 
    if (this._content) {
      GL.alpha = this.opacity
      GL.blend = this.blend
      GL.matrix.set(this.matrix)
      GL.drawImage(this.texture, this._textOuterX, this._textOuterY, this._textOuterWidth, this._textOuterHeight)

      // 
      for (const image of this.printer.images) {
        image.draw()
      }
    }

    // 
    this.drawChildren()
  }

  /**  */
  resize() {
    if (this.visible) {
      if (this.parent instanceof WindowElement) {
        return this.parent.requestResizing()
      }
      if (this.printer) {
        this.printer.images.changed = true
      }
      this.calculatePosition()
      this.calculateTextPosition()
      this.resizeChildren()
    }
  }

  /**  */
  calculateTextPosition() {
    const printer = this.printer
    if (printer !== null) {
      const pl = printer.paddingLeft
      const pt = printer.paddingTop
      const pr = printer.paddingRight
      const pb = printer.paddingBottom
      const outerX = this.x - pl
      const outerY = this.y - pt
      const outerWidth = this.texture.width
      const outerHeight = this.texture.height
      const innerWidth = outerWidth - pl - pr
      const innerHeight = outerHeight - pt - pb
      const marginWidth = this.width - innerWidth
      const marginHeight = this.height - innerHeight
      const factorX = printer.alignmentFactorX
      const factorY = printer.alignmentFactorY
      const offsetX = marginWidth * factorX
      const offsetY = marginHeight * factorY
      this.textWidth = innerWidth
      this.textHeight = innerHeight
      this._textOuterX = outerX + offsetX
      this._textOuterY = outerY + offsetY
      this._textOuterWidth = outerWidth
      this._textOuterHeight = outerHeight

      // 
      this.resizeEmbeddedImages(offsetX, offsetY)
    }
  }

  /**  */
  resizeEmbeddedImages(offsetX, offsetY) {
    const images = this.printer.images
    if (images.changed) {
      images.changed = false
      for (const image of images) {
        const transform = image.transform
        transform.x = image.startX + offsetX
        transform.y = image.startY + offsetY
        image.parent = this
        image.connected = true
        image.resize()
      }
    }
  }

  /**  */
  destroy() {
    this.texture?.destroy()
    this.printer?.destroy()
    return super.destroy()
  }
}

// ********************************  ********************************

class TextBoxElement extends UIElement {
  /** HTML()
   *  @type {HTMLInputElement}
   */ input

  /** 
   *  @type {boolean}
   */ focusing

  /** 
   *  @type {Texture}
   */ texture

  /** 
   *  @type {Printer}
   */ printer

  /** 
   *  @type {number}
   */ min

  /** 
   *  @type {number}
   */ max

  /** 
   *  @type {number}
   */ decimals

  /** 
   *  @type {number}
   */ scrollLeft

  /** 
   *  @type {number}
   */ selectionStart

  /** 
   *  @type {number}
   */ selectionEnd

  // 
  _type                 //:string
  _align                //:string
  _padding              //:number
  _size                 //:number
  _font                 //:string
  _color                //:string
  _colorInt             //:number
  _textX                //:number
  _textY                //:number
  _textShiftY           //:number
  _innerWidth           //:number
  _innerHeight          //:number
  _selectionLeft        //:number
  _selectionRight       //:number
  _selectionY           //:number
  _selectionHeight      //:number
  _selectionColor       //:string
  _selectionColorInt    //:number
  _selectionBgColor     //:string
  _selectionBgColorInt  //:number
  _cursorVisible        //:boolean
  _cursorElapsed        //:number

  //  - 
  static numberFilter = /^(?:[-.\d]|-?(?:\d+)?\.?\d+)$/

  // 
  static defaultData = {
    type: 'text',
    align: 'left',
    text: 'Content',
    maxLength: 16,
    number: 0,
    min: 0,
    max: 0,
    decimals: 0,
    padding: 4,
    size: 16,
    font: '',
    color: 'ffffffff',
    selectionColor: 'ffffffff',
    selectionBgColor: '0090ccff',
    ...UIElement.defaultData,
  }

  /**
   * @param {Object} data 
   */
  constructor(data = TextBoxElement.defaultData) {
    super(data)
    this.input = null
    this.focusing = false
    this.texture = new Texture()
    this.type = data.type
    this.align = data.align
    this.min = data.min
    this.max = data.max
    this.decimals = data.decimals
    this.padding = data.padding
    this.size = data.size
    this.font = data.font
    this.color = data.color
    this.scrollLeft = 0
    this.selectionStart = -1
    this.selectionEnd = -1
    this.selectionColor = data.selectionColor
    this.selectionBgColor = data.selectionBgColor
    this._cursorVisible = false
    this._cursorElapsed = null
    this.printer = new Printer(this.texture)
    this.printer.matchTag = Function.empty
    this.printer.sizes[0] = this.size
    this.printer.fonts[0] = this.font || Printer.font
    this.printer.colors[0] = '#ffffff'
    this.printer.effects[0] = {type: 'none'}
    this.createHTMLInputElement(data)
    this.emit('create')
  }

  /**
   * (|)
   * @type {string}
   */
  get type() {
    return this._type
  }

  set type(value) {
    if (this._type !== value) {
      this._type = value
      // 
      if (this.input &amp;&amp; value === 'number') {
        this.input.value = this.readInputNumber()
      }
    }
  }

  /**  */
  get text() {
    if (this.type === 'text') {
      return this.input.value
    }
  }

  set text(value) {
    if (this.type === 'text') {
      this.input.value = value
    }
  }

  /**  */
  get number() {
    if (this.type === 'number') {
      return this.readInputNumber()
    }
  }

  set number(value) {
    if (this.type === 'number') {
      this.input.value = value
      this.input.value = this.readInputNumber()
    }
  }

  /**
   * 
   * @type {string}
   */
  get align() {
    return this._align
  }

  set align(value) {
    if (this._align !== value) {
      this._align = value
      if (this.connected) {
        this.calculateTextPosition()
      }
    }
  }

  /**
   * 
   * @type {number}
   */
  get padding() {
    return this._padding
  }

  set padding(value) {
    if (this._padding !== value) {
      this._padding = value
      if (this.connected) {
        this.calculateTextPosition()
      }
    }
  }

  /**
   * 
   * @type {number}
   */
  get size() {
    return this._size
  }

  set size(value) {
    if (this._size !== value) {
      this._size = value
      if (this.printer) {
        this.printer.reset()
        this.printer.sizes[0] = value
      }
    }
  }

  /**
   * 
   * @type {string}
   */
  get font() {
    return this._font
  }

  set font(value) {
    if (this._font !== value) {
      this._font = value
      if (this.printer) {
        this.printer.reset()
        this.printer.fonts[0] = value || Printer.font
      }
    }
  }

  /**
   * 
   * @type {string}
   */
  get color() {
    return this._color
  }

  set color(value) {
    if (this._color !== value) {
      this._color = value
      this._colorInt = Color.parseInt(value)
    }
  }

  /**
   * 
   * @type {string}
   */
  get selectionColor() {
    return this._selectionColor
  }

  set selectionColor(value) {
    if (this._selectionColor !== value) {
      this._selectionColor = value
      this._selectionColorInt = Color.parseInt(value)
    }
  }

  /**
   * 
   * @type {string}
   */
  get selectionBgColor() {
    return this._selectionBgColor
  }

  set selectionBgColor(value) {
    if (this._selectionBgColor !== value) {
      this._selectionBgColor = value
      this._selectionBgColorInt = Color.parseInt(value)
    }
  }

  /**
   * HTML
   * @param {Object} data 
   */
  createHTMLInputElement(data) {
    const input = document.createElement('input')
    input.classList.add('text-box-shadow-input')
    // 
    input.events = [
      ['keydown', this.keydownEvent.bind(this)],
      ['wheel', this.wheelEvent.bind(this)],
      ['beforeinput', this.beforeinputEvent.bind(this)],
      ['input', this.inputEvent.bind(this)],
      ['change', this.changeEvent.bind(this)],
      ['focus', this.focusEvent.bind(this)],
      ['blur', this.blurEvent.bind(this)],
    ]
    // 
    switch (data.type) {
      case 'text':
        input.value = data.text
        break
      case 'number':
        input.value = data.number.toString()
        break
    }
    input.maxLength = data.maxLength
    input.style.boxSizing = 'border-box'
    input.style.position = 'fixed'
    input.style.fontFamily = this.printer.fonts[0]
    input.style.fontSize = `${this.printer.sizes[0]}px`
    input.style.padding = `${data.padding}px`
    input.style.textAlign = this.align
    // 
    // GL
    input.style.color = 'transparent'
    input.style.backgroundColor = 'transparent'
    input.style.border = 'none'
    input.style.outline = 'none'
    document.body.appendChild(this.input = input)
    // 
    if (!TextBoxElement.style) {
      const style = document.createElement('style')
      style.textContent = `
      .text-box-shadow-input::selection {
        color: transparent;
        background-color: transparent;
      }`
      document.head.appendChild(style)
      TextBoxElement.style = style
    }
  }

  /**
   * 
   * @param {KeyboardEvent} event 
   */
  keydownEvent(event) {
    Input.keydownFilter(event)
    // 
    if (this.type === 'number') {
      switch (event.code) {
        case 'ArrowUp':
          event.preventDefault()
          event.stopPropagation()
          this.fineTuneNumber(+1)
          break
        case 'ArrowDown':
          event.preventDefault()
          event.stopPropagation()
          this.fineTuneNumber(-1)
          break
        case 'ArrowLeft':
        case 'ArrowRight':
          event.stopPropagation()
          break
        case 'Escape':
          event.stopPropagation()
          this.input.blur()
          break
      }
    }
  }

  /**
   * 
   * @param {WheelEvent} event 
   */
  wheelEvent(event) {
    // 
    if (this.type === 'number' &amp;&amp; this.focusing) {
      this.fineTuneNumber(event.deltaY &lt; 0 ? +1 : -1)
    }
  }

  /**
   * 
   * @param {InputEvent} event 
   */
  beforeinputEvent(event) {
    if (this.type === 'number' &amp;&amp;
      typeof event.data === 'string' &amp;&amp;
      !TextBoxElement.numberFilter.test(event.data)) {
      // 
      event.preventDefault()
    }
  }

  /**  */
  inputEvent() {
    const {printer, input} = this
    // 
    if (printer.content !== input.value) {
      this.selectionStart = null
      this.selectionEnd = null
      // 
      this.emit('input', false)
    }
  }

  /**  */
  changeEvent() {
    if (this.type === 'number') {
      // 
      const string = this.readInputNumber().toString()
      if (this.input.value !== string) {
        this.input.value = string
      }
    }
  }

  /**  */
  focusEvent() {
    if (!this.focusing) {
      this.focusing = true
      this._cursorVisible = true
      this._cursorElapsed = 0
      // 
      this.emit('focus', false)
    }
  }

  /**  */
  blurEvent() {
    if (this.focusing) {
      this.focusing = false
      // 
      this.emit('blur', false)
    }
  }

  /**
   * 
   * @param {number} offset 
   */
  fineTuneNumber(offset) {
    this.input.value = this.readInputNumber(offset).toString()
    this.inputEvent()
  }

  /**
   * 
   * @param {number} offset 
   * @returns {number}
   */
  readInputNumber(offset = 0) {
    const {input, min, max, decimals} = this
    const value = parseFloat(input.value) + offset || 0
    return Math.roundTo(Math.clamp(value, min, max), decimals)
  }

  /**  */
  connect() {
    super.connect()
    this.addEventListeners()
  }

  /**  */
  disconnect() {
    super.disconnect()
    this.removeEventListeners()
  }

  /**  */
  addEventListeners() {
    const {input} = this
    if (!input) return
    for (const [type, listener] of input.events) {
      input.on(type, listener)
    }
  }

  /**  */
  removeEventListeners() {
    const {input} = this
    if (!input) return
    for (const [type, listener] of input.events) {
      input.off(type, listener)
    }
  }

  /**  */
  update() {
    const {printer, input} = this
    const {context} = printer
    // 
    if (this.scrollLeft !== input.scrollLeft) {
      this.scrollLeft = input.scrollLeft
    }
    // 
    if (this.selectionStart !== input.selectionStart) {
      this.selectionStart = input.selectionStart
      if (this.selectionStart === this.selectionEnd) {
        // 0
        this._selectionLeft = this._selectionRight
        this._cursorVisible = true
        this._cursorElapsed = 0
      } else if (this.selectionStart === 0) {
        // 0
        this._selectionLeft = 0
      } else {
        // 
        context.font = `${this.printer.sizes[0]}px ${this.printer.fonts[0]}`
        this._selectionLeft = context.measureText(input.value.slice(0, this.selectionStart)).width
      }
    }
    // 
    if (this.selectionEnd !== input.selectionEnd) {
      this.selectionEnd = input.selectionEnd
      if (this.selectionEnd === this.selectionStart) {
        // 0
        this._selectionRight = this._selectionLeft
        this._cursorVisible = true
        this._cursorElapsed = 0
      } else {
        // 0
        context.font = `${this.printer.sizes[0]}px ${this.printer.fonts[0]}`
        this._selectionRight = context.measureText(input.value.slice(0, this.selectionEnd)).width
      }
    }
    // 0
    if (this.focusing &amp;&amp; this.selectionStart === this.selectionEnd) {
      if ((this._cursorElapsed += Time.deltaTime) >= 500) {
        this._cursorVisible = !this._cursorVisible
        this._cursorElapsed -= 500
      }
    }

    // 
    if (printer.content !== input.value) {
      if (printer.content) {
        printer.reset()
      }
      printer.draw(input.value)
      if (this.connected) {
        this.calculateTextPosition()
      }
    }
  }

  /**  */
  draw() {
    if (this.visible === false) {
      return
    }

    // 
    this.update()

    // 
    GL.alpha = this.opacity
    GL.blend = 'normal'
    GL.matrix.set(this.matrix)

    // 
    const {texture} = this
    const {base} = texture
    switch (this.focusing) {
      case false:
        // 
        if (this.input.value) {
          // 
          const sx = this.scrollLeft
          const sy = this._textShiftY
          const sw = Math.min(base.width - sx, this._innerWidth)
          const sh = this._innerHeight
          GL.drawImageWithColor(texture.clip(sx, sy, sw, sh), this._textX, this._textY, texture.width, texture.height, this._colorInt)
        }
        break
      case true: {
        // 
        const SL = Math.floor(this._selectionLeft)
        const SR = Math.ceil(this._selectionRight)
        // 
        const sl = Math.clamp(SL - this.scrollLeft, 0, this._innerWidth)
        const sr = Math.clamp(SR - this.scrollLeft, 0, this._innerWidth)
        if (this.selectionStart !== this.selectionEnd) {
          // 0
          // 
          const dx = this._textX + sl
          const dy = this._selectionY
          const dw = sr - sl
          const dh = this._selectionHeight
          GL.fillRect(dx, dy, dw, dh, this._selectionBgColorInt)

          // 
          const sy = this._textShiftY
          const sh = this._innerHeight
          // 
          const tr = Math.min(base.width - this.scrollLeft, this._innerWidth)
          if (0 &lt; sl) {
            // 
            const sx = this.scrollLeft
            const sw = sl
            GL.drawImageWithColor(texture.clip(sx, sy, sw, sh), this._textX, this._textY, sw, sh, this._colorInt)
          }
          if (sl &lt; sr) {
            // ()
            const sx = SL + Math.max(this.scrollLeft - SL, 0)
            const sw = sr - sl
            GL.drawImageWithColor(texture.clip(sx, sy, sw, sh), this._textX + sl, this._textY, sw, sh, this._selectionColorInt)
          }
          if (sr &lt; tr) {
            // 
            const sx = SR
            const sw = tr - sr
            GL.drawImageWithColor(texture.clip(sx, sy, sw, sh), this._textX + sr, this._textY, sw, sh, this._colorInt)
          }
        } else {
          // 0
          if (this.input.value) {
            // 
            const sx = this.scrollLeft
            const sy = this._textShiftY
            const sw = Math.min(base.width - sx, this._innerWidth)
            const sh = this._innerHeight
            GL.drawImageWithColor(texture.clip(sx, sy, sw, sh), this._textX, this._textY, texture.width, texture.height, this._colorInt)
          }

          // 
          if (this._cursorVisible) {
            const dx = this._textX + sl
            const dy = this._selectionY
            const dw = 1
            const dh = this._selectionHeight
            GL.fillRect(dx, dy, dw, dh, this._colorInt)
          }
        }
      }
    }

    // 
    this.drawChildren()
  }

  /**
   * 
   * @returns {TextBoxElement}
   */
  hide() {
    if (this.visible) {
      this.visible = false
      this.input.style.display = 'none'
    }
    return this
  }

  /**
   * 
   * @returns {TextBoxElement}
   */
  show() {
    if (!this.visible) {
      this.visible = true
      this.input.style.display = 'inherit'
      this.resize()
    }
    return this
  }

  /**  */
  resize() {
    if (this.visible) {
      if (this.parent instanceof WindowElement) {
        return this.parent.requestResizing()
      }
      this.calculatePosition()
      this.calculateTextPosition()
      this.calculateHTMLInputPosition()
      this.resizeChildren()
    }
  }

  /**  */
  calculateTextPosition() {
    const printer = this.printer
    const size = printer.sizes[0]
    const vpadding = (this.height - size) / 2
    const paddingTop = printer.paddingTop
    const base = this.texture.base
    // 
    this._textX = this.x + this.padding
    this._textY = this.y + Math.max(vpadding - paddingTop, 0)
    // Y
    this._textShiftY = Math.max(paddingTop - vpadding, 0)
    // 
    this._innerWidth = Math.max(this.width - this.padding * 2, 0)
    this._innerHeight = Math.min(this.height + this.y - this._textY, base.height)
    // Y
    this._selectionY = this.y + Math.max(vpadding, 0)
    this._selectionHeight = Math.min(this.height, size)
    // 
    switch (this.align) {
      case 'center':
        if (base.width &lt; this._innerWidth) {
          this._textX += (this._innerWidth - base.width) / 2
        }
        break
      case 'right':
        if (base.width &lt; this._innerWidth) {
          this._textX += this._innerWidth - base.width + 1
        }
        break
    }
    // 
    const scaleX = Math.max(this.transform.scaleX, 1)
    const scaleY = Math.max(this.transform.scaleY, 1)
    this._textX = Math.round(this._textX * scaleX) / scaleX
    this._textY = Math.round(this._textY * scaleY) / scaleY
  }

  /** HTML */
  calculateHTMLInputPosition() {
    if (this.input !== null) {
      const offsetX = this.x + this.width / 2
      const offsetY = this.y + this.height / 2
      const matrix = Matrix.instance.reset()
      const mouse = Input.mouse
      // 
      switch (mouse.rotated) {
        case false:
          matrix
          .translate(mouse.left - offsetX, mouse.top - offsetY)
          .scale(1 / mouse.ratioX, 1 / mouse.ratioY)
          .multiply(this.matrix)
          .translate(offsetX, offsetY)
          break
        case true:
          matrix
          .translate(mouse.right - offsetX, mouse.top - offsetY)
          .rotate(Math.PI / 2)
          .scale(1 / mouse.ratioX, 1 / mouse.ratioY)
          .multiply(this.matrix)
          .translate(offsetX, offsetY)
          break
      }
      const a = matrix[0]
      const b = matrix[1]
      const c = matrix[3]
      const d = matrix[4]
      const e = matrix[6]
      const f = matrix[7]
      // 
      this.input.style.left = `${this.x}px`
      this.input.style.top = `${this.y}px`
      this.input.style.width = `${this.width}px`
      this.input.style.height = `${this.height}px`
      this.input.style.transform = `matrix(${a}, ${b}, ${c}, ${d}, ${e}, ${f})`
    }
  }

  /**  */
  destroy() {
    this.texture?.destroy()
    if (this.input) {
      document.body.removeChild(this.input)
      if (this.connected) {
        this.removeEventListeners()
      }
      // DOM
      // INPUT
      this.input.events = null
      this.input = null
    }
    return super.destroy()
  }
}

// ********************************  ********************************

class DialogBoxElement extends UIElement {
  /** 
   *  @type {string}
   */ state

  /** 
   *  @type {Texture|null}
   */ texture

  /** 
   *  @type {Printer|null}
   */ printer

  /** ()
   *  @type {number}
   */ elapsed

  /** ()
   *  @type {number}
   */ interval

  /** 
   *  @type {number}
   */ printEndX

  /** 
   *  @type {number}
   */ printEndY

  /** 
   *  @type {string}
   */ blend

  // 
  _changed        //:boolean
  _content        //:string
  _rawContent     //:string
  _size           //:string
  _lineSpacing    //:string
  _letterSpacing  //:string
  _color          //:string
  _font           //:string
  _style          //:string
  _weight         //:string
  _typeface       //:string
  _effect         //:object
  _textOuterX      //:number
  _textOuterY      //:number
  _textOuterWidth  //:number
  _textOuterHeight //:number

  // 
  static defaultData = {
    content: 'Content',
    interval: 16.6666,
    size: 16,
    lineSpacing: 0,
    letterSpacing: 0,
    color: 'ffffffff',
    font: '',
    typeface: 'regular',
    effect: {type: 'none'},
    blend: 'normal',
    ...UIElement.defaultData,
  }

  /**
   * @param {Object} data 
   */
  constructor(data = DialogBoxElement.defaultData) {
    super(data)
    this.state = 'complete'
    this.texture = null
    this.printer = null
    this.elapsed = 0
    this.interval = data.interval
    this.content = data.content
    this.size = data.size
    this.lineSpacing = data.lineSpacing
    this.letterSpacing = data.letterSpacing
    this.color = data.color
    this.font = data.font
    this.typeface = data.typeface
    this.effect = {...data.effect}
    this._textOuterX = 0
    this._textOuterY = 0
    this._textOuterWidth = 0
    this._textOuterHeight = 0
    this.printEndX = 0
    this.printEndY = 0
    this.blend = data.blend
    this.emit('create')
  }

  /**
   * 
   * @type {string}
   */
  get content() {
    return this._content
  }

  set content(value) {
    this._rawContent = value
    this._content = Local.replace(value)
    this._changed = true
    this.state = 'updating'
  }

  /**
   * 
   * @type {number}
   */
  get size() {
    return this._size
  }

  set size(value) {
    if (this._size !== value) {
      this._size = value
      if (this.printer) {
        this.reload()
        this.printer.sizes[0] = value
      }
    }
  }

  /**
   * 
   * @type {number}
   */
  get lineSpacing() {
    return this._lineSpacing
  }

  set lineSpacing(value) {
    if (this._lineSpacing !== value) {
      this._lineSpacing = value
      if (this.printer) {
        this.reload()
        this.printer.lineSpacing = value
      }
    }
  }

  /**
   * 
   * @type {number}
   */
  get letterSpacing() {
    return this._letterSpacing
  }

  set letterSpacing(value) {
    if (this._letterSpacing !== value) {
      this._letterSpacing = value
      if (this.printer) {
        this.reload()
        this.printer.letterSpacing = value
      }
    }
  }

  /**
   * 
   * @type {string}
   */
  get color() {
    return this._color
  }

  set color(value) {
    if (this._color !== value) {
      this._color = value
      if (this.printer) {
        this.reload()
        this.printer.colors[0] = Color.parseCSSColor(value)
      }
    }
  }

  /**
   * 
   * @type {string}
   */
  get font() {
    return this._font
  }

  set font(value) {
    if (this._font !== value) {
      this._font = value
      if (this.printer) {
        this.reload()
        this.printer.fonts[0] = value || Printer.font
      }
    }
  }

  /**
   * 
   * @type {string}
   */
  get typeface() {
    return this._typeface
  }

  set typeface(value) {
    if (this._typeface !== value) {
      switch (value) {
        case 'regular':
          this._style = 'normal'
          this._weight = 'normal'
          break
        case 'bold':
          this._style = 'normal'
          this._weight = 'bold'
          break
        case 'italic':
          this._style = 'italic'
          this._weight = 'normal'
          break
        case 'bold-italic':
          this._style = 'italic'
          this._weight = 'bold'
          break
        default:
          return
      }
      this._typeface = value
      if (this.printer) {
        this.reload()
        this.printer.styles[0] = this._style
        this.printer.weights[0] = this._weight
      }
    }
  }

  /**
   * 
   * @type {Object}
   */
  get effect() {
    return this._effect
  }

  set effect(value) {
    this._effect = value
    if (this.printer) {
      this.reload()
      this.printer.effects[0] = Printer.parseEffect(value)
    }
  }

  /**  */
  update() {
    let printer = this.printer
    if (printer === null) {
      // 
      const texture = new Texture()
      printer = new Printer(texture)
      printer.sizes[0] = this.size
      // 
      printer.paddingLeft = 10
      printer.paddingTop = 50
      printer.paddingRight = 110
      printer.paddingBottom = 50
      printer.calculatePadding = Function.empty
      printer.lineSpacing = this.lineSpacing
      printer.letterSpacing = this.letterSpacing
      printer.colors[0] = Color.parseCSSColor(this.color)
      printer.fonts[0] = this.font || Printer.font
      printer.styles[0] = this._style
      printer.weights[0] = this._weight
      printer.effects[0] = Printer.parseEffect(this.effect)
      printer.wordWrap = true
      printer.truncate = true
      this.texture = texture
      this.printer = printer
      // 
      // ()
      delete texture.base.onRestore
    }

    // 
    if (printer.printWidth !== this.width ||
      printer.printHeight !== this.height) {
      // 
      if (printer.content) printer.reset()
      const width = Math.min(Math.ceil(this.width + printer.paddingLeft + printer.paddingRight), 16384)
      const height = Math.min(Math.ceil(this.height + printer.paddingTop + printer.paddingBottom), 16384)
      printer.texture.resize(width, height)
      printer.context.resize(width, height)
      printer.printWidth = this.width
      printer.printHeight = this.height
      this._changed = true
      this.calculateTextPosition()
    }

    // 
    if (this._changed &amp;&amp; this.state !== 'paused') {
      this._changed = false
      this.reload()
    }

    // 
    if (this.state === 'updating') {
      this.print()
    }
  }

  // 
  updateTextContent() {
    this.content = this._rawContent
  }

  /**  */
  reload() {
    const {printer} = this
    // 
    if (printer.content) {
      printer.reset()
      printer.context.clear()
    }
    // 
    printer.content = this.content
    this.state = 'updating'
  }

  /**  */
  pause() {
    if (this.state === 'updating') {
      this.state = 'paused'
    }
  }

  /**  */
  continue() {
    if (this.state === 'paused') {
      this.state = 'updating'
    }
  }

  /**  */
  printImmediately() {
    if (this.state === 'updating') {
      // 
      const {interval} = this
      this.interval = 0
      this.update()
      this.interval = interval
    }
  }

  /**  */
  printNextPage() {
    if (this.state !== 'complete') {
      this.state = 'updating'
      this.printer.x = 0
      this.printer.y = 0
      this.printer.context.clear()
    }
  }

  /**  */
  drawBuffer() {
    const {printer} = this
    // 
    if (printer.buffer !== '') {
      printer.drawBuffer()
      this.printEndX = this.printer.x
      this.printEndY = this.printer.y
    }
  }

  /**  */
  print() {
    let count = Infinity
    if (this.interval !== 0) {
      this.elapsed += Time.rawDeltaTime
      // 
      if (count = Math.floor(this.elapsed / this.interval)) {
        this.elapsed -= this.interval * count
      } else {
        return
      }
    }
    const printer = this.printer
    const content = printer.content
    const printWidth = printer.printWidth
    const printHeight = printer.printHeight
    const letterSpacing = printer.letterSpacing
    const charWidths = Printer.charWidths
    const length = content.length
    let charIndex = 0
    let charWidth = 0

    // 
    printer.commands = []

    // 
    printer.updateFont()

    // 
    while (printer.index &lt; length) {
      // ()
      const char = content[printer.index]
      if (char === '&lt;' &amp;&amp; printer.matchTag()) {
        continue
      }

      // 
      if (count === 0) {
        break
      }

      // 
      if (char === '\n') {
        this.drawBuffer()
        printer.newLine()
        printer.index += 1
        continue
      }

      // 
      if (Printer.wordWrap === 'keep' &amp;&amp; printer.index >= printer.wrapEnd &amp;&amp; printer.isWrapOverflowing()) {
        this.drawBuffer()
        printer.newLine()
        continue
      }

      // 
      if (printer.y + Math.max(printer.lineHeight, printer.measureHeight(char)) > printHeight) {
        this.drawBuffer()
        this.state = 'waiting'
        break
      }

      // 
      if (printer.x + Printer.lineWidth + (charWidth = printer.measureWidth(char)) > printWidth) {
        this.drawBuffer()
        printer.newLine(true)
        continue
      }

      // 
      if (letterSpacing !== 0) {
        charWidths[charIndex++] = charWidth
        Printer.lineWidth += letterSpacing
      }
      Printer.lineWidth += charWidth

      // 
      printer.buffer += char
      printer.index += 1
      count--
    }

    // 
    if (printer.index === length) {
      this.state = 'complete'
    }

    // 
    this.drawBuffer()

    // 
    printer.executeCommands()
  }

  /**  */
  draw() {
    if (this.visible === false) {
      return
    }

    // 
    this.update()

    // 
    if (this.content) {
      GL.alpha = this.opacity
      GL.blend = this.blend
      GL.matrix.set(this.matrix)
      GL.drawImage(this.texture, this._textOuterX, this._textOuterY, this._textOuterWidth, this._textOuterHeight)

      // 
      this.resizeEmbeddedImages()

      // 
      for (const image of this.printer.images) {
        image.draw()
      }
    }

    // 
    this.drawChildren()
  }

  /**  */
  resize() {
    if (this.visible) {
      if (this.parent instanceof WindowElement) {
        return this.parent.requestResizing()
      }
      if (this.printer) {
        this.printer.images.changed = true
      }
      this.calculatePosition()
      this.calculateTextPosition()
      this.resizeChildren()
    }
  }

  /**  */
  calculateTextPosition() {
    const printer = this.printer
    if (printer !== null) {
      this._textOuterX = this.x - printer.paddingLeft
      this._textOuterY = this.y - printer.paddingTop
      this._textOuterWidth = this.texture.width
      this._textOuterHeight = this.texture.height
    }
  }

  /**  */
  resizeEmbeddedImages() {
    const images = this.printer.images
    if (images.changed) {
      images.changed = false
      for (const image of images) {
        image.parent = this
        image.connected = true
        image.resize()
      }
    }
  }

  /**  */
  destroy() {
    this.texture?.destroy()
    this.printer?.destroy()
    return super.destroy()
  }
}

// ********************************  ********************************

class ProgressBarElement extends UIElement {
  /** 
   *  @type {ImageElement|null}
   */ texture

  /** (|)
   *  @type {string}
   */ display

  /** 
   *  @type {Array&lt;number>}
   */ clip

  /** (||)
   *  @type {string}
   */ type

  /** 
   *  @type {number}
   */ step

  /** 
   *  @type {number}
   */ centerX

  /** 
   *  @type {number}
   */ centerY

  /** ()
   *  @type {number}
   */ startAngle

  /** ()
   *  @type {number}
   */ centralAngle

  /** (0-1)
   *  @type {number}
   */ progress

  /** (|)
   *  @type {string}
   */ colorMode

  /** 
   *  @type {Array&lt;number>}
   */ color

  /** 
   *  @type {string}
   */ blend

  // 
  _image //:string

  // 
  static defaultData = {
    image: '',
    display: 'stretch',
    clip: [0, 0, 32, 32],
    type: 'horizontal',
    centerX: 0.5,
    centerY: 0.5,
    startAngle: -90,
    centralAngle: 360,
    step: 0,
    progress: 1,
    blend: 'normal',
    colorMode: 'texture',
    color: [0, 0, 0, 0],
    ...UIElement.defaultData,
  }

  /**
   * @param {Object} data 
   */
  constructor(data = ProgressBarElement.defaultData) {
    super(data)
    this.texture = null
    this.image = data.image
    this.display = data.display
    this.clip = [...data.clip]
    this.type = data.type
    this.step = data.step
    this.centerX = data.centerX
    this.centerY = data.centerY
    this.startAngle = data.startAngle
    this.centralAngle = data.centralAngle
    this.progress = data.progress
    this.colorMode = data.colorMode
    this.color = new Uint8ClampedArray(data.color)
    this.blend = data.blend
    this.emit('create')
  }

  /**
   * IDHTML
   * @type {string|HTMLImageElement}
   */
  get image() {
    return this._image
  }

  set image(value) {
    if (this._image !== value) {
      this._image = value
      // 
      if (this.texture) {
        this.texture.destroy()
        this.texture = null
      }
      if (value) {
        this.texture = new ImageTexture(value)
      }
    }
  }

  /**  */
  draw() {
    if (this.visible === false) {
      return
    }

    // 
    const {texture} = this
    if (this.progress > 0 &amp;&amp; texture?.complete) {
      const {base} = texture
      // 
      switch (this.display) {
        case 'stretch':
          texture.clip(0, 0, base.width, base.height)
          break
        case 'clip':
          texture.clip(...this.clip)
          break
      }
      const scaleX = this.width / texture.width
      const scaleY = this.height / texture.height
      // 
      const {vertices, vertexLength, drawingLength} =
      this.calculateProgressVertices()

      // 
      GL.blend = this.blend
      GL.alpha = this.opacity
      const matrix = Matrix.instance.project(
        GL.flip,
        GL.width,
        GL.height,
      )
      .multiply(this.matrix)
      .translate(this.x, this.y)
      .scale(scaleX, scaleY)
      const program = GL.imageProgram.use()
      GL.bindVertexArray(program.vao.a110)
      GL.vertexAttrib1f(program.a_Opacity, 1)
      GL.uniformMatrix3fv(program.u_Matrix, false, matrix)
      GL.uniform1i(program.u_LightMode, 0)
      // 
      switch (this.colorMode) {
        case 'texture':
          GL.uniform1i(program.u_ColorMode, 0)
          GL.uniform4f(program.u_Tint, 0, 0, 0, 0)
          break
        case 'fixed': {
          const color = this.color
          const red = color[0] / 255
          const green = color[1] / 255
          const blue = color[2] / 255
          const alpha = color[3] / 255
          GL.uniform1i(program.u_ColorMode, 1)
          GL.uniform4f(program.u_Color, red, green, blue, alpha)
          break
        }
      }
      GL.bufferData(GL.ARRAY_BUFFER, vertices, GL.STREAM_DRAW, 0, vertexLength)
      GL.bindTexture(GL.TEXTURE_2D, base.glTexture)
      GL.drawArrays(GL.TRIANGLE_FAN, 0, drawingLength)
    }

    // 
    this.drawChildren()
  }

  /**  */
  calculateProgressVertices() {
    const type = this.type
    const progress = Math.clamp(this.progress, 0, 1)
    const texture = this.texture
    const x = texture.x
    const y = texture.y
    const w = texture.width
    const h = texture.height
    const tw = texture.base.width
    const th = texture.base.height
    const response = ProgressBarElement.response
    const vertices = response.vertices
    const step = this.step
    switch (type) {
      case 'horizontal': {
        // 
        let sw = w * progress
        let sh = h
        if (step !== 0) {
          // 
          sw = Math.round(sw / step) * step
          sw = Math.clamp(sw, 0, w)
        }
        const dl = 0
        const dt = 0
        const dr = sw
        const db = sh
        const sl = x / tw
        const st = y / th
        const sr = (x + sw) / tw
        const sb = (y + sh) / th
        vertices[0] = dl
        vertices[1] = dt
        vertices[2] = sl
        vertices[3] = st
        vertices[4] = dl
        vertices[5] = db
        vertices[6] = sl
        vertices[7] = sb
        vertices[8] = dr
        vertices[9] = db
        vertices[10] = sr
        vertices[11] = sb
        vertices[12] = dr
        vertices[13] = dt
        vertices[14] = sr
        vertices[15] = st
        response.vertexLength = 16
        response.drawingLength = 4
        return response
      }
      case 'vertical': {
        // 
        let sw = w
        let sh = h * progress
        if (step !== 0) {
          // 
          sh = Math.round(sh / step) * step
          sh = Math.clamp(sh, 0, h)
        }
        const dl = 0
        const dt = h - sh
        const dr = sw
        const db = h
        const sl = x / tw
        const st = (y + dt) / th
        const sr = (x + sw) / tw
        const sb = (y + h) / th
        vertices[0] = dl
        vertices[1] = dt
        vertices[2] = sl
        vertices[3] = st
        vertices[4] = dl
        vertices[5] = db
        vertices[6] = sl
        vertices[7] = sb
        vertices[8] = dr
        vertices[9] = db
        vertices[10] = sr
        vertices[11] = sb
        vertices[12] = dr
        vertices[13] = dt
        vertices[14] = sr
        vertices[15] = st
        response.vertexLength = 16
        response.drawingLength = 4
        return response
      }
      case 'round': {
        // 
        //  = 
        //  = 
        const angles = response.angles
        const array = response.array
        let startAngle = this.startAngle
        let centralAngle = this.centralAngle
        let currentAngle = centralAngle * progress
        if (step !== 0) {
          // 
          currentAngle = Math.round(currentAngle / step) * step
          currentAngle = centralAngle >= 0
          ? Math.min(currentAngle, centralAngle)
          : Math.max(currentAngle, centralAngle)
        }
        if (currentAngle &lt; 0) {
          // 
          // 
          currentAngle = -currentAngle
          startAngle -= currentAngle
        }
        startAngle = Math.radians(startAngle)
        currentAngle = Math.radians(currentAngle)
        // 
        const dl = 0
        const dt = 0
        const dr = w
        const db = h
        const dox = w * this.centerX
        const doy = h * this.centerY
        const tox = dox + x
        const toy = doy + y
        const sox = tox / tw
        const soy = toy / th
        const sl = x / tw
        const st = y / th
        const sr = (x + w) / tw
        const sb = (y + h) / th
        // 
        angles[0] = Math.modRadians(Math.atan2(dt - doy, dr - dox) - startAngle)
        angles[1] = Math.modRadians(Math.atan2(db - doy, dr - dox) - startAngle)
        angles[2] = Math.modRadians(Math.atan2(db - doy, dl - dox) - startAngle)
        angles[3] = Math.modRadians(Math.atan2(dt - doy, dl - dox) - startAngle)
        // 
        vertices[0] = dox
        vertices[1] = doy
        vertices[2] = sox
        vertices[3] = soy
        // 
        let minimum = angles[0]
        let startIndex = 0
        for (let i = 1; i &lt; 4; i++) {
          if (angles[i] &lt; minimum) {
            minimum = angles[i]
            startIndex = i
          }
        }
        // 
        let vi = 8
        let endIndex = startIndex
        for (let i = 0; i &lt; 4; i++) {
          // 
          const index = (startIndex + i) % 4
          if (angles[index] &lt; currentAngle) {
            switch (index) {
              case 0: // 
                vertices[vi    ] = dr
                vertices[vi + 1] = dt
                vertices[vi + 2] = sr
                vertices[vi + 3] = st
                break
              case 1: // 
                vertices[vi    ] = dr
                vertices[vi + 1] = db
                vertices[vi + 2] = sr
                vertices[vi + 3] = sb
                break
              case 2: // 
                vertices[vi    ] = dl
                vertices[vi + 1] = db
                vertices[vi + 2] = sl
                vertices[vi + 3] = sb
                break
              case 3: // 
                vertices[vi    ] = dl
                vertices[vi + 1] = dt
                vertices[vi + 2] = sl
                vertices[vi + 3] = st
                break
            }
            vi += 4
          } else {
            // 
            endIndex = index
            break
          }
        }
        // 
        array[0] = startAngle
        array[1] = startIndex
        array[2] = 4
        // 
        array[3] = startAngle + currentAngle
        array[4] = endIndex
        array[5] = vi
        // 
        for (let i = 0; i &lt; 6; i += 3) {
          const angle = array[i]
          const side = array[i + 1]
          const vi = array[i + 2]
          switch (side) {
            case 0: { // 
              const x = Math.tan(angle + Math.PI * 0.5) * doy
              const dx = (dox + x)
              const sx = (tox + x) / tw
              vertices[vi    ] = dx
              vertices[vi + 1] = dt
              vertices[vi + 2] = sx
              vertices[vi + 3] = st
              break
            }
            case 1: { // 
              const y = Math.tan(angle) * (w - dox)
              const dy = (doy + y)
              const sy = (toy + y) / th
              vertices[vi    ] = dr
              vertices[vi + 1] = dy
              vertices[vi + 2] = sr
              vertices[vi + 3] = sy
              break
            }
            case 2: { // 
              const x = Math.tan(angle - Math.PI * 0.5) * (h - doy)
              const dx = (dox - x)
              const sx = (tox - x) / tw
              vertices[vi    ] = dx
              vertices[vi + 1] = db
              vertices[vi + 2] = sx
              vertices[vi + 3] = sb
              break
            }
            case 3: { // 
              const y = Math.tan(angle - Math.PI) * dox
              const dy = (doy - y)
              const sy = (toy - y) / th
              vertices[vi    ] = dl
              vertices[vi + 1] = dy
              vertices[vi + 2] = sl
              vertices[vi + 3] = sy
              break
            }
          }
        }
        const drawingLength = vi / 4 + 1
        response.vertexLength = drawingLength * 4
        response.drawingLength = drawingLength
        return response
      }
    }
  }

  /**  */
  resize() {
    if (this.visible) {
      if (this.parent instanceof WindowElement) {
        return this.parent.requestResizing()
      }
      this.calculatePosition()
      this.resizeChildren()
    }
  }

  /**  */
  destroy() {
    this.texture?.destroy()
    return super.destroy()
  }

  //  - 
  static response = {
    vertices: new Float32Array(28),
    angles: new Float64Array(4),
    array: new Float64Array(6),
    vertexLength: null,
    drawingLength: null,
  }
}

// ********************************  ********************************

class ButtonElement extends UIElement {
  _displayMode  //:string
  _mode         //:string
  state         //:string
  selected      //:boolean
  shadowImage   //:element
  shadowText    //:element
  shadowScript  //:object
  _imagePadding //:number
  _textPadding  //:number
  _normalImage  //:string
  _hoverImage   //:string
  _activeImage  //:string
  normalColor   //:string
  hoverColor    //:string
  activeColor   //:string
  _imageOpacity //:number
  imageEffect   //:string
  normalTint    //:array
  hoverTint     //:array
  activeTint    //:array

  // 
  static BasicButtonScript = class BasicButtonScript {
    button
    hover = false
    active = false

    // 
    onScriptAdd(button) {
      this.button = button
    }

    // 
    updateButtonState(hoverSE = false) {
      if (this.active) {
        return this.button.activate()
      }
      if (this.hover) {
        return this.button.hover(hoverSE)
      }
      return this.button.restore()
    }

    // 
    onMouseMove() {
      if (!this.hover &amp;&amp; !this.button.isProtected()) {
        this.hover = true
        UI.restoreRelatedButtons(this.button)
        this.updateButtonState(true)
      }
    }

    // 
    onMouseLeave() {
      this.hover = false
      // 
      if (!this.button.isProtected() &amp;&amp;
        UI.getPointerEventRoot().contains(this.button)) {
        this.updateButtonState()
      }
    }

    // 
    onMouseDownLB() {
      if (!this.button.isProtected() &amp;&amp;
        Input.event instanceof PointerEvent) {
        this.hover = true
        this.active = true
        UI.restoreRelatedButtons(this.button)
        this.updateButtonState()
        Input.on('mouseupLB', this.onMouseUpLB, true)
      }
    }

    // 
    onMouseUpLB = () => {
      if (this.active) {
        this.active = false
        if (!this.button.isProtected()) {
          this.updateButtonState()
        }
      }
      Input.off('mouseupLB', this.onMouseUpLB)
    }

    // 
    onClick() {
      if (!this.button.isProtected()) {
        this.button.playClickSound()
      }
    }
  }

  constructor(data) {
    super(data)
    this._displayMode = 'normal'
    this.mode = 'normal'
    this.state = 'normal'
    this.selected = false
    this.shadowImage = this.createShadowImage(data)
    this.shadowText = this.createShadowText(data)
    this.shadowScript = this.createShadowScript()
    this.imageOpacity = data.imageOpacity
    this.imagePadding = data.imagePadding
    this.textPadding = data.textPadding
    this.normalImage = data.normalImage
    this.normalClip = [...data.normalClip]
    this.hoverImage = data.hoverImage
    this.hoverClip = [...data.hoverClip]
    this.activeImage = data.activeImage
    this.activeClip = [...data.activeClip]
    this.normalColor = data.normalColor
    this.hoverColor = data.hoverColor
    this.activeColor = data.activeColor
    this.imageEffect = data.imageEffect
    this.normalTint = [...data.normalTint]
    this.hoverTint = [...data.hoverTint]
    this.activeTint = [...data.activeTint]
    this.hoverSound = data.hoverSound
    this.clickSound = data.clickSound
    this.clip = this.normalClip
    this.tint = this.normalTint
    UI.latest = this
    this.emit('create')
  }

  // 
  get mode() {
    return this._mode
  }

  // 
  set mode(value) {
    if (this._mode !== value) {
      this._mode = value
      if (this.shadowImage) {
        this.updateDisplayMode()
      }
    }
  }

  // 
  get imagePadding() {
    return this._imagePadding
  }

  // 
  set imagePadding(value) {
    if (this._imagePadding !== value) {
      this._imagePadding = value
      this.shadowImage.transform.width = -value * 2
      this.shadowImage.transform.height = -value * 2
      if (this.connected) {
        this.shadowImage.resize()
      }
    }
  }

  // 
  get textPadding() {
    return this._textPadding
  }

  // 
  set textPadding(value) {
    if (this._textPadding !== value) {
      this._textPadding = value
      this.shadowText.transform.width = -value * 2
      this.shadowText.transform.height = -value * 2
      if (this.connected) {
        this.shadowText.resize()
      }
    }
  }

  // 
  get image() {
    return this.shadowImage.image
  }

  // 
  set image(value) {
    this.shadowImage.image = value
  }

  // 
  get normalImage() {
    return this._normalImage
  }

  // 
  set normalImage(value) {
    if (this._normalImage !== value) {
      this._normalImage = value
      if (this._displayMode === 'normal') {
        this.image = value
      }
    }
  }

  // 
  get hoverImage() {
    return this._hoverImage
  }

  // 
  set hoverImage(value) {
    if (this._hoverImage !== value) {
      this._hoverImage = value
      if (this._displayMode === 'hover') {
        this.image = value
      }
    }
  }

  // 
  get activeImage() {
    return this._activeImage
  }

  // 
  set activeImage(value) {
    if (this._activeImage !== value) {
      this._activeImage = value
      if (this._displayMode === 'active') {
        this.image = value
      }
    }
  }

  // 
  get display() {
    return this.shadowImage.display
  }

  // 
  set display(value) {
    this.shadowImage.display = value
  }

  // 
  get flip() {
    return this.shadowImage.flip
  }

  // 
  set flip(value) {
    this.shadowImage.flip = value
  }

  // 
  get clip() {
    return this.shadowImage.clip
  }

  // 
  set clip(value) {
    this.shadowImage.clip = value
  }

  // 
  get tint() {
    return this.shadowImage.tint
  }

  // 
  set tint(value) {
    this.shadowImage.tint = value
  }

  // 
  get border() {
    return this.shadowImage.border
  }

  // 
  set border(value) {
    this.shadowImage.border = value
  }

  // 
  get imageOpacity() {
    return this._imageOpacity
  }

  // 
  set imageOpacity(value) {
    if (this._imageOpacity !== value) {
      this._imageOpacity = value
      this.shadowImage.transform.opacity = value
      if (this.connected) {
        this.shadowImage.resize()
      }
    }
  }

  // 
  get content() {
    return this.shadowText.content
  }

  // 
  set content(value) {
    this.shadowText.content = value
  }

  // 
  get size() {
    return this.shadowText.size
  }

  // 
  set size(value) {
    this.shadowText.size = value
  }

  // 
  get font() {
    return this.shadowText.font
  }

  // 
  set font(value) {
    this.shadowText.font = value
  }

  // 
  get direction() {
    return this.shadowText.direction
  }

  // 
  set direction(value) {
    this.shadowText.direction = value
  }

  // 
  get horizontalAlign() {
    return this.shadowText.horizontalAlign
  }

  // 
  set horizontalAlign(value) {
    this.shadowText.horizontalAlign = value
  }

  // 
  get verticalAlign() {
    return this.shadowText.verticalAlign
  }

  // 
  set verticalAlign(value) {
    this.shadowText.verticalAlign = value
  }

  // 
  get size() {
    return this.shadowText.size
  }

  // 
  set size(value) {
    this.shadowText.size = value
  }

  // 
  get lineSpacing() {
    return this.shadowText.lineSpacing
  }

  // 
  set lineSpacing(value) {
    this.shadowText.lineSpacing = value
  }

  // 
  get letterSpacing() {
    return this.shadowText.letterSpacing
  }

  // 
  set letterSpacing(value) {
    this.shadowText.letterSpacing = value
  }

  // 
  get color() {
    return this.shadowText.color
  }

  // 
  set color(value) {
    this.shadowText.color = value
  }

  // 
  get font() {
    return this.shadowText.font
  }

  // 
  set font(value) {
    this.shadowText.font = value
  }

  // 
  get typeface() {
    return this.shadowText.typeface
  }

  // 
  set typeface(value) {
    this.shadowText.typeface = value
  }

  // 
  get textEffect() {
    return this.shadowText.effect
  }

  // 
  set textEffect(value) {
    this.shadowText.effect = value
  }

  // 
  static shadowTransform = {
    anchorX: 0.5,
    anchorY: 0.5,
    x: 0,
    x2: 0.5,
    y: 0,
    y2: 0.5,
    width: 0,
    width2: 1,
    height: 0,
    height2: 1,
    rotation: 0,
    scaleX: 1,
    scaleY: 1,
    skewX: 0,
    skewY: 0,
    opacity: 1,
  }

  // 
  static imageData = {
    ...ImageElement.defaultData,
    transform: this.shadowTransform,
  }

  // 
  static textData = {
    ...TextElement.defaultData,
    transform: this.shadowTransform,
  }

  // 
  createShadowImage(data) {
    const {imageData} = ButtonElement
    imageData.image = data.normalImage
    imageData.display = data.display
    imageData.flip = data.flip
    imageData.clip = data.normalClip
    imageData.tint = data.normalTint
    imageData.border = data.border
    const element = new ImageElement(imageData)
    element.parent = this
    element.connected = true
    this.updaters.add(element.updaters)
    return element
  }

  // 
  createShadowText(data) {
    const {textData} = ButtonElement
    textData.color = data.normalColor
    textData.direction = data.direction
    textData.horizontalAlign = data.horizontalAlign
    textData.verticalAlign = data.verticalAlign
    textData.content = data.content
    textData.size = data.size
    textData.letterSpacing = data.letterSpacing
    textData.font = data.font
    textData.typeface = data.typeface
    textData.effect = data.textEffect
    const element = new TextElement(textData)
    element.parent = this
    element.connected = true
    this.updaters.add(element.updaters)
    return element
  }

  // 
  createShadowScript() {
    const script = Script.create(this, [])
    script.add(new ButtonElement.BasicButtonScript())
    return script
  }

  // 
  isProtected() {
    const focuses = UI.focuses
    const length = focuses.length
    const focus = focuses[length - 1]
    if (focus instanceof UIElement) {
      if (focus.focusMode === 'control-descendant-buttons'
      ? focus.contains(this)
      : focus === this.parent) {
        return false
      }
    }
    for (let i = length - 2; i >= 0; i--) {
      const focus = focuses[i]
      if (focus.focusMode === 'control-descendant-buttons'
      ? focus.contains(this)
      : focus === this.parent) {
        return true
      }
    }
    return false
  }

  // 
  playHoverSound() {
    AudioManager.se.play(this.hoverSound)
  }

  // 
  playClickSound() {
    AudioManager.se.play(this.clickSound)
  }

  // 
  updateTextContent() {
    this.shadowText.updateTextContent()
  }

  // 
  updateDisplayMode(se = false) {
    let mode = this.mode
    if (mode === 'normal') {
      mode = this.state
      if (mode === 'hover' &amp;&amp; this.isProtected()) {
        mode = 'active'
      }
    }
    if (this._displayMode !== mode) {
      this._displayMode = mode
      switch (mode) {
        case 'normal':
          this.image = this.normalImage
          this.color = this.normalColor
          this.clip = this.normalClip
          switch (this.imageEffect) {
            case 'none':
              break
            case 'tint-1':
            case 'tint-2':
            case 'tint-3':
              this.tint = this.normalTint
              break
          }
          break
        case 'hover':
          this.image = this.hoverImage || this.normalImage
          this.color = this.hoverColor || this.normalColor
          this.clip = this.hoverImage &amp;&amp; this.hoverClip || this.normalClip
          switch (this.imageEffect) {
            case 'none':
              break
            case 'tint-1':
              this.tint = this.normalTint
              break
            case 'tint-2':
            case 'tint-3':
              this.tint = this.hoverTint
              break
          }
          if (se) {
            this.playHoverSound()
          }
          break
        case 'active':
          this.image = this.activeImage || this.hoverImage || this.normalImage
          this.color = this.activeColor || this.hoverColor || this.normalColor
          this.clip = this.activeImage &amp;&amp; this.activeClip || this.hoverImage &amp;&amp; this.hoverClip || this.normalClip
          switch (this.imageEffect) {
            case 'none':
              break
            case 'tint-1':
              this.tint = this.normalTint
              break
            case 'tint-2':
              this.tint = this.hoverTint
              break
            case 'tint-3':
              this.tint = this.activeTint
              break
          }
          break
      }
    }
  }

  // 
  restore() {
    if (this.state !== 'normal') {
      if (this.selected) {
        this.selected = false
        this.emit('deselect')
      }
      this.state = 'normal'
      this.updateDisplayMode()
    }
  }

  // 
  hover(se = false) {
    if (this.state !== 'hover') {
      if (!this.selected) {
        this.selected = true
        this.emit('select')
      }
      this.state = 'hover'
      this.updateDisplayMode(se)
      if (!(Input.event instanceof PointerEvent) &amp;&amp;
        this.parent instanceof WindowElement) {
        this.parent.scrollToChild(this)
      }
    }
  }

  // 
  activate() {
    if (this.state !== 'active') {
      if (!this.selected) {
        this.selected = true
        this.emit('select')
      }
      this.state = 'active'
      this.updateDisplayMode()
    }
  }

  // 
  draw() {
    if (this.visible === false) {
      return this.drawChildren()
    }

    // 
    this.shadowImage.draw()

    // 
    this.shadowText.draw()

    // 
    this.drawChildren()
  }

  // 
  resize() {
    if (this.parent instanceof WindowElement) {
      return this.parent.requestResizing()
    }
    this.calculatePosition()
    this.shadowImage.resize()
    this.shadowText.resize()
    this.resizeChildren()
  }

  /**
   * 
   * @param {string} type 
   * @param {boolean} [bubble] 
   */
  emit(type, bubble = false) {
    // 
    this.shadowScript.emit(type, this)
    // 
    switch (type) {
      case 'mousemove':
      case 'mouseenter':
      case 'mouseleave':
      case 'mousedown':
      case 'mousedownLB':
      case 'mousedownRB':
      case 'mouseup':
      case 'mouseupLB':
      case 'mouseupRB':
      case 'click':
        if (this.isProtected()) return
        Input.bubbles.stop()
    }
    return super.emit(type, bubble)
  }

  // 
  destroy() {
    this.shadowImage.destroy()
    this.shadowText.destroy()
    return super.destroy()
  }
}

// ********************************  ********************************

class AnimationElement extends UIElement {
  player        //:object
  _animation    //:string
  _motion       //:string
  _rotatable    //:boolean
  _angle        //:number
  initialFrame  //:number
  _offsetX      //:number
  _offsetY      //:number
  animationX    //:number
  animationY    //:number

  // 
  static matrix = new Matrix()

  constructor(data) {
    super(data)
    this.player = null
    this.motion = Enum.getValue(data.motion)
    this.autoplay = data.autoplay
    this.rotatable = data.rotatable
    this.angle = data.angle
    this.initialFrame = data.frame
    this.offsetX = data.offsetX
    this.offsetY = data.offsetY
    this.animation = data.animation
    this.emit('create')
  }

  // ID
  get animation() {
    return this._animation
  }

  // ID
  set animation(value) {
    if (this._animation !== value) {
      this._animation = value
      if (this.player !== null) {
        this.player.destroy()
        this.player = null
      }
      const animation = Data.animations[value]
      if (animation !== undefined) {
        this.player = new Animation(animation)
        this.player.paused = !this.autoplay
        this.player.setAsUIComponent()
        this.player.setMotion(this.motion)
        this.player.rotatable = this.rotatable
        this.player.setAngle(Math.radians(this.angle))
        this.player.goto(this.initialFrame)
      }
    }
  }

  // 
  get motion() {
    return this._motion
  }

  // 
  set motion(value) {
    if (this._motion !== value) {
      this._motion = value
      this.player?.setMotion(value)
    }
  }

  // 
  get rotatable() {
    return this._rotatable
  }

  // 
  set rotatable(value) {
    if (this._rotatable !== value) {
      this._rotatable = value
      if (this.player) {
        this.player.rotatable = value
        this.player.rotation = 0
        if (typeof this.angle === 'number') {
          this.player.setAngle(Math.radians(this.angle))
        }
      }
    }
  }

  // 
  get angle() {
    return this._angle
  }

  // 
  set angle(value) {
    if (this._angle !== value) {
      this._angle = value
      this.player?.setAngle(Math.radians(value))
    }
  }

  // 
  get frame() {
    return this.player?.index
  }

  // 
  set frame(value) {
    this.player?.goto(value)
  }

  // X
  get offsetX() {
    return this._offsetX
  }

  // X
  set offsetX(value) {
    if (this._offsetX !== value) {
      this._offsetX = value
      if (this.connected) {
        this.calculateAnimationPosition()
      }
    }
  }

  // Y
  get offsetY() {
    return this._offsetY
  }

  // Y
  set offsetY(value) {
    if (this._offsetY !== value) {
      this._offsetY = value
      if (this.connected) {
        this.calculateAnimationPosition()
      }
    }
  }

  /**
   * 
   * @param {Actor} actor 
   */
  loadActorAnimation(actor) {
    const {animation} = actor
    if (animation instanceof Animation) {
      this.animation = ''
      this.animation = animation.data.id
      this.player.images = animation.images
    }
  }

  // 
  draw() {
    const player = this.player
    if (player !== null) {
      player.update(Time.rawDeltaTime)
      GL.alpha = this.opacity
      const gl = GL
      const program = gl.spriteProgram.use()
      const matrix = AnimationElement.matrix.project(
        gl.flip,
        gl.width,
        gl.height,
      ).multiply(this.matrix)
      gl.batchRenderer.bindProgram()
      gl.batchRenderer.setAttrSize(8)
      gl.bindVertexArray(program.vao)
      gl.uniformMatrix3fv(program.u_Matrix, false, matrix)
      const ax = this.animationX
      const ay = this.animationY
      player.position.x = ax
      player.position.y = ay
      player.setDrawingPosition(ax, ay)
      player.updateFrameParameters()
      player.draw('raw')
      gl.batchRenderer.draw()
      gl.batchRenderer.unbindProgram()
      player.emitters.update(Time.rawDeltaTime)
      player.emitters.draw(matrix)
    }

    // 
    this.drawChildren()
  }

  // 
  resize() {
    if (this.parent instanceof WindowElement) {
      return this.parent.requestResizing()
    }
    this.calculatePosition()
    this.calculateAnimationPosition()
    this.resizeChildren()
  }

  // 
  calculateAnimationPosition() {
    this.animationX = this.x + this.width / 2 + this.offsetX
    this.animationY = this.y + this.height / 2 + this.offsetY
  }

  // 
  destroy() {
    this.player?.destroy()
    return super.destroy()
  }
}

// ********************************  ********************************

class VideoElement extends UIElement {
  /** HTML()
   *  @type {HTMLVideoElement}
   */ player

  /** 
   *  @type {string}
   */ state

  /** 
   *  @type {string}
   */ flip

  /** 
   *  @type {string}
   */ blend

  /** 
   *  @type {Texture}
   */ texture

  // 
  _onSwitch //:function

  // 
  static defaultData = {
    video: '',
    loop: false,
    flip: 'none',
    blend: 'normal',
    ...UIElement.defaultData,
  }

  /**
   * @param {Object} data 
   */
  constructor(data = VideoElement.defaultData) {
    super(data)
    // 
    this.player = document.createElement('video')
    this.state = 'paused'
    this.video = data.video
    this.loop = data.loop
    this.flip = data.flip
    this.blend = data.blend
    this.texture = new Texture()
    // 
    this.player.on('playing', () => {
      this.texture.resize(this.player.videoWidth, this.player.videoHeight)
    })
    // 
    this.player.on('play', () => {this.state = 'playing'})
    this.player.on('pause', () => {this.state = 'paused'})
    this.player.on('ended', () => {this.state = 'ended'})
    // 
    this.player.on('error', () => {this.player.pause()})
    // 
    this._onSwitch = () => {
      if (document.hidden) {
        if (this.state === 'playing') {
          this.player.pause()
        }
      } else {
        if (this.state === 'paused') {
          this.player.play().catch(error => {})
        }
      }
    }
    // 
    this.createVideoFrameUpdater()
    this.emit('create')
  }

  /**
   * ID
   * @type {string}
   */
  get video() {
    return this.player.guid
  }

  set video(value) {
    const {player} = this
    if (player.guid !== value) {
      player.guid = value
      player.src = File.getPathByGUID(value)
      player.play().catch(error => {})
    }
  }

  /**  */
  get loop() {
    return this.player.loop
  }

  set loop(value) {
    this.player.loop = value
  }

  /**  */
  createVideoFrameUpdater() {
    const {player, texture: {base}} = this
    if ('requestVideoFrameCallback' in player) {
      // 
      const update = () => {
        GL.bindTexture(GL.TEXTURE_2D, base.glTexture)
        GL.texImage2D(GL.TEXTURE_2D, 0, GL.RGBA, GL.RGBA, GL.UNSIGNED_BYTE, player)
        player.requestVideoFrameCallback(update)
      }
      player.requestVideoFrameCallback(update)
    } else {
      // 
      const fps = 60
      const interval = 1000 / fps
      let elapsed = 0
      this.updaters.add({
        update: () => {
          elapsed += Time.rawDeltaTime
          if (elapsed >= interval) {
            elapsed %= interval
            // 
            if (player.readyState === 4) {
              GL.bindTexture(GL.TEXTURE_2D, base.glTexture)
              GL.texImage2D(GL.TEXTURE_2D, 0, GL.RGBA, GL.RGBA, GL.UNSIGNED_BYTE, player)
            }
          }
        }
      })
    }
  }

  /**  */
  pause() {
    if (this.state === 'playing') {
      this.player.pause()
    }
  }

  /**  */
  continue() {
    if (this.state === 'paused') {
      this.player.play().catch(error => {})
    }
  }

  /**  */
  connect() {
    super.connect()
    this.player.play().catch(error => {})
    document.on('visibilitychange', this._onSwitch)
  }

  /**  */
  disconnect() {
    super.disconnect()
    this.player.pause()
    document.off('visibilitychange', this._onSwitch)
  }

  /**  */
  draw() {
    if (this.visible === false) {
      return
    }
    GL.alpha = this.opacity
    GL.blend = this.blend
    GL.matrix.set(this.matrix)
    GL.drawImage(this.texture, this.x, this.y, this.width, this.height)
    this.drawChildren()
  }

  /**  */
  resize() {
    if (this.visible) {
      if (this.parent instanceof WindowElement) {
        return this.parent.requestResizing()
      }
      this.calculatePosition()
      this.resizeChildren()
    }
  }

  /**  */
  onEnded(callback) {
    if (this.state === 'ended') return callback()
    this.player.on('ended', callback, {once: true})
  }

  /**  */
  destroy() {
    this.player.pause()
    this.texture?.destroy()
    // 
    if (this.state !== 'ended') {
      this.player.dispatchEvent(
        new window.Event('ended')
      )
    }
    return super.destroy()
  }
}

// ********************************  ********************************

class WindowElement extends UIElement {
  /** 
   *  @type {number}
   */ scrollWidth

  /** 
   *  @type {number}
   */ scrollHeight

  /** (|)
   *  @type {string}
   */ overflow

  /** 
   *  @type {number}
   */ columns

  /** 
   *  @type {number}
   */ rows

  /** 
   *  @type {Object}
   */ proxy

  // 
  _layout       //:string
  _scrollX      //:number
  _scrollY      //:number

  // 
  static defaultData = {
    layout: 'normal',
    scrollX: 0,
    scrollY: 0,
    gridWidth: 0,
    gridHeight: 0,
    gridGapX: 0,
    gridGapY: 0,
    paddingX: 0,
    paddingY: 0,
    overflow: 'visible',
    ...UIElement.defaultData,
  }

  /**
   * @param {Object} data 
   */
  constructor(data = WindowElement.defaultData) {
    super(data)
    this.layout = data.layout
    this.scrollWidth = 0
    this.scrollHeight = 0
    this.scrollX = data.scrollX
    this.scrollY = data.scrollY
    this.gridWidth = data.gridWidth
    this.gridHeight = data.gridHeight
    this.gridGapX = data.gridGapX
    this.gridGapY = data.gridGapY
    this.paddingX = data.paddingX
    this.paddingY = data.paddingY
    this.overflow = data.overflow
    this.columns = 0
    this.rows = 0
    this.proxy = {
      x: 0,
      y: 0,
      width: 0,
      height: 0,
      matrix: null,
      opacity: 0,
    }
    this.emit('create')
  }

  /**
   * 
   * @type {string}
   */
  get layout() {
    return this._layout
  }

  set layout(value) {
    if (this._layout !== value) {
      this._layout = value
      // 
      switch (value) {
        case 'normal':
          delete this.resize
          break
        case 'horizontal-grid':
          this.resize = WindowElement.horizontalGridResize
          break
        case 'vertical-grid':
          this.resize = WindowElement.verticalGridResize
          break
      }
      if (this.connected) {
        this.resize()
      }
    }
  }

  /**
   * X
   * @type {number}
   */
  get scrollX() {
    return this._scrollX
  }

  set scrollX(value) {
    const max = this.scrollWidth - this.width
    const scrollX = Math.clamp(value, 0, max)
    if (this._scrollX !== scrollX &amp;&amp; Number.isFinite(value)) {
      this._scrollX = scrollX
      if (this.connected) {
        this.resize()
      }
    }
  }

  /**
   * Y
   * @type {number}
   */
  get scrollY() {
    return this._scrollY
  }

  set scrollY(value) {
    const max = this.scrollHeight - this.height
    const scrollY = Math.clamp(value, 0, max)
    if (this._scrollY !== scrollY &amp;&amp; Number.isFinite(value)) {
      this._scrollY = scrollY
      if (this.connected) {
        this.resize()
      }
    }
  }

  /**
   * 
   * @type {number}
   */
  get gridWidth() {
    return this._gridWidth
  }

  set gridWidth(value) {
    if (this._gridWidth !== value) {
      this._gridWidth = value
      if (this.connected) {
        this.resize()
      }
    }
  }

  /**
   * 
   * @type {number}
   */
  get gridHeight() {
    return this._gridHeight
  }

  set gridHeight(value) {
    if (this._gridHeight !== value) {
      this._gridHeight = value
      if (this.connected) {
        this.resize()
      }
    }
  }

  /**
   * 
   * @type {number}
   */
  get gridGapX() {
    return this._gridGapX
  }

  set gridGapX(value) {
    if (this._gridGapX !== value) {
      this._gridGapX = value
      if (this.connected) {
        this.resize()
      }
    }
  }

  /**
   * 
   * @type {number}
   */
  get gridGapY() {
    return this._gridGapY
  }

  set gridGapY(value) {
    if (this._gridGapY !== value) {
      this._gridGapY = value
      if (this.connected) {
        this.resize()
      }
    }
  }

  /**
   * 
   * @type {number}
   */
  get paddingX() {
    return this._paddingX
  }

  set paddingX(value) {
    if (this._paddingX !== value) {
      this._paddingX = value
      if (this.connected) {
        this.resize()
      }
    }
  }

  /**
   * 
   * @type {number}
   */
  get paddingY() {
    return this._paddingY
  }

  set paddingY(value) {
    if (this._paddingY !== value) {
      this._paddingY = value
      if (this.connected) {
        this.resize()
      }
    }
  }

  /**
   * 
   * @returns {number} 
   */
  getVisibleGridColumns() {
    switch (this.layout) {
      case 'normal':
        return 0
    }
    const innerWidth = this.width + this.gridGapX - this.paddingX * 2
    const unitWidth = this.gridWidth + this.gridGapX
    return unitWidth > 0 ? Math.floor(innerWidth / unitWidth) : Infinity
  }

  /**
   * 
   * @returns {number} 
   */
  getVisibleGridRows() {
    switch (this.layout) {
      case 'normal':
        return 0
    }
    const innerHeight = this.height + this.gridGapY - this.paddingY * 2
    const unitHeight = this.gridHeight + this.gridGapY
    return unitHeight > 0 ? Math.floor(innerHeight / unitHeight) : Infinity
  }

  /**
   * 
   * @param {UIElement} element 
   */
  scrollToChild(element) {
    const index = this.children.indexOf(element)
    if (index !== -1) {
      switch (this.layout) {
        case 'normal': {
          const left = element.x - this.x
          const top = element.y - this.y
          const right = left + element.width
          const bottom = top + element.height
          this.scrollX = Math.clamp(this.scrollX, right - this.width, left)
          this.scrollY = Math.clamp(this.scrollY, bottom - this.height, top)
          break
        }
        case 'horizontal-grid': {
          const cols = this.getVisibleGridColumns()
          if (Number.isFinite(cols)) {
            const rows = Math.floor(index / cols)
            const y = rows * (this.gridHeight + this.gridGapY) + this.paddingY
            this.scrollY = Math.clamp(this.scrollY, y + this.gridHeight - this.height, y)
          }
          break
        }
        case 'vertical-grid': {
          const rows = this.getVisibleGridRows()
          if (Number.isFinite(rows)) {
            const cols = Math.floor(index / rows)
            const x = cols * (this.gridWidth + this.gridGapX) + this.paddingX
            this.scrollX = Math.clamp(this.scrollX, x + this.gridWidth - this.width, x)
          }
          break
        }
      }
    }
  }

  /**  */
  draw() {
    if (this.visible === false) {
      return
    }

    // 
    switch (this.overflow) {
      case 'visible':
        this.drawChildren()
        break
      case 'hidden':
        if (!GL.depthTest) {
          GL.alpha = 1
          GL.blend = 'normal'
          GL.depthTest = true
          GL.enable(GL.DEPTH_TEST)
          GL.depthFunc(GL.ALWAYS)
          GL.matrix.set(this.matrix)
          GL.fillRect(this.x, this.y, this.width, this.height, 0x00000000)
          GL.depthFunc(GL.EQUAL)
          this.drawChildren()
          GL.clear(GL.DEPTH_BUFFER_BIT)
          GL.disable(GL.DEPTH_TEST)
          GL.depthTest = false
        }
        break
    }
  }

  /**  */
  drawChildren() {
    if (this.overflow === 'visible') {
      return super.drawChildren()
    }
    switch (this.layout) {
      case 'normal':
        return super.drawChildren()
      case 'horizontal-grid': {
        const unitWidth = this.gridWidth + this.gridGapX
        const unitHeight = this.gridHeight + this.gridGapY
        if (unitWidth * unitHeight === 0) {
          return super.drawChildren()
        }
        const children = this.children
        const scrollTop = this.scrollY - this.paddingY
        const scrollBottom = scrollTop + this.height
        const startRow = Math.floor(scrollTop / unitHeight)
        const endRow = Math.ceil(scrollBottom / unitHeight)
        const start = Math.max(startRow * this.columns, 0)
        const end = Math.min(endRow * this.columns, children.length)
        for (let i = start; i &lt; end; i++) {
          children[i].draw()
        }
        break
      }
      case 'vertical-grid': {
        const unitWidth = this.gridWidth + this.gridGapX
        const unitHeight = this.gridHeight + this.gridGapY
        if (unitWidth * unitHeight === 0) {
          return super.drawChildren()
        }
        const children = this.children
        const scrollLeft = this.scrollX - this.paddingX
        const scrollRight = scrollLeft + this.width
        const startCol = Math.floor(scrollLeft / unitWidth)
        const endCol = Math.ceil(scrollRight / unitWidth)
        const start = Math.max(startCol * this.rows, 0)
        const end = Math.min(endCol * this.rows, children.length)
        for (let i = start; i &lt; end; i++) {
          children[i].draw()
        }
        break
      }
    }
  }

  /**  */
  resize() {
    if (this.visible) {
      if (this.parent instanceof WindowElement) {
        return this.parent.requestResizing()
      }
      this.calculatePosition()
      const {proxy} = this
      const {children} = this
      const {length} = children
      // 
      proxy.x = this.x - this.scrollX
      proxy.y = this.y - this.scrollY
      proxy.width = this.width
      proxy.height = this.height
      proxy.matrix = this.matrix
      proxy.opacity = this.opacity
      for (let i = 0; i &lt; length; i++) {
        // 
        const element = children[i]
        element.parent = proxy
        element.resize()
        element.parent = this
      }
      // 
      this._calculateScrollArea()
    }
  }

  /** () */
  requestResizing() {
    // 
    if (!this.requesting) {
      this.requesting = true
      Callback.push(() => {
        delete this.requesting
        this.resize()
      })
    }
  }

  /**  */
  _calculateScrollArea() {
    const {max} = Math
    const {children} = this
    const {length} = children
    const parentWidth = this.width
    const parentHeight = this.height
    // 
    let scrollWidth = this.width
    let scrollHeight = this.height
    for (let i = 0; i &lt; length; i++) {
      // 
      const {transform} = children[i]
      const sx = transform.scaleX
      const sy = transform.scaleY
      // 
      const x = transform.x + transform.x2 * parentWidth
      const y = transform.y + transform.y2 * parentHeight
      // 
      const w = max(transform.width + transform.width2 * parentWidth, 0)
      const h = max(transform.height + transform.height2 * parentHeight, 0)
      scrollWidth = max(scrollWidth, x + (1 - transform.anchorX) * w * sx)
      scrollHeight = max(scrollHeight, y + (1 - transform.anchorY) * h * sy)
    }
    this.scrollWidth = scrollWidth
    this.scrollHeight = scrollHeight
    // 
    this.scrollX = this.scrollX
    this.scrollY = this.scrollY
  }

  /**  -  */
  static horizontalGridResize() {
    if (!this.visible) return
    this.calculatePosition()
    const {children} = this
    const {length} = children
    // 
    if (length === 0) {
      this.columns = 0
      this.rows = 0
      return
    }
    const {proxy} = this
    const {floor, ceil, max} = Math
    const {gridWidth, gridHeight, gridGapX, gridGapY, paddingX, paddingY} = this
    const unitWidth = gridWidth + gridGapX
    const unitHeight = gridHeight + gridGapY
    // 0
    const columns = unitWidth === 0 ? length
    : max(floor((this.width + gridGapX - paddingX * 2) / unitWidth), 1)
    const rows = ceil(length / columns)
    // 
    const scrollHeight = rows * unitHeight - gridGapY + paddingY * 2
    this.scrollWidth = max(this.width, gridWidth)
    this.scrollHeight = max(this.height, scrollHeight)
    this.columns = columns
    this.rows = rows
    // 
    this.scrollY = this.scrollY
    // 
    proxy.width = gridWidth
    proxy.height = gridHeight
    proxy.matrix = this.matrix
    proxy.opacity = this.opacity
    // 
    const sx = this.x - this.scrollX + paddingX
    const sy = this.y - this.scrollY + paddingY
    for (let i = 0; i &lt; length; i++) {
      const element = children[i]
      // 
      proxy.x = sx + i % columns * unitWidth
      proxy.y = sy + floor(i / columns) * unitHeight
      // 
      element.parent = proxy
      element.resize()
      element.parent = this
    }
  }

  /**  -  */
  static verticalGridResize() {
    if (!this.visible) return
    this.calculatePosition()
    const {children} = this
    const {length} = children
    // 
    if (length === 0) {
      this.columns = 0
      this.rows = 0
      return
    }
    const {proxy} = this
    const {floor, ceil, max} = Math
    const {gridWidth, gridHeight, gridGapX, gridGapY, paddingX, paddingY} = this
    const unitWidth = gridWidth + gridGapX
    const unitHeight = gridHeight + gridGapY
    // 0
    const rows = unitHeight === 0 ? length
    : max(floor((this.height + gridGapY - paddingY * 2) / unitHeight), 1)
    const columns = ceil(length / rows)
    // 
    const scrollWidth = columns * unitWidth - gridGapX + paddingX * 2
    this.scrollWidth = max(this.width, scrollWidth)
    this.scrollHeight = max(this.height, gridHeight)
    this.columns = columns
    this.rows = rows
    // 
    this.scrollX = this.scrollX
    // 
    proxy.width = gridWidth
    proxy.height = gridHeight
    proxy.matrix = this.matrix
    proxy.opacity = this.opacity
    // 
    const sx = this.x - this.scrollX + paddingX
    const sy = this.y - this.scrollY + paddingY
    for (let i = 0; i &lt; length; i++) {
      const element = children[i]
      // 
      proxy.x = sx + floor(i / rows) * unitWidth
      proxy.y = sy + i % rows * unitHeight
      // 
      element.parent = proxy
      element.resize()
      element.parent = this
    }
  }
}

// ********************************  ********************************

class ContainerElement extends UIElement {
  constructor(data = UIElement.defaultData) {
    super(data)
    this.emit('create')
  }

  /**  */
  draw() {
    if (this.visible) {
      this.drawChildren()
    }
  }

  /**  */
  resize() {
    if (this.visible) {
      if (this.parent instanceof WindowElement) {
        return this.parent.requestResizing()
      }
      this.calculatePosition()
      this.resizeChildren()
    }
  }
}

// ********************************  ********************************

const UIElementManager = new class {
  // 
  CELL = Symbol('CELL')
  cells = [[], [], [], []]
  counts = new Uint32Array(4)
  index = 0

  // 
  activeElements = []
  activeCount = 0

  // 
  get count() {
    let count = 0
    for (const cell of this.cells) {
      count += cell.length
    }
    return count
  }

  /**
   * 
   * @param {UIElement} element 
   */
  append(element) {
    const cells = this.cells
    const index = this.index++ % cells.length
    const cell = cells[index]
    if (!element[this.CELL]) {
      element[this.CELL] = cell
    }
    if (!element.activated) {
      element.activated = true
      this.activate(element)
    }
    cell.push(element)
  }

  /**
   * 
   * @param {UIElement} element 
   */
  remove(element) {
    // 
    const cell = element[this.CELL]
    delete element[this.CELL]
    Callback.push(() => {
      cell.remove(element)
    })
  }

  /**
   * 
   * @param {UIElement} element 
   */
  activate(element) {
    this.activeElements[this.activeCount++] = element
  }

  /**  */
  autorun() {
    for (let i = 0; i &lt; this.activeCount; i++) {
      this.activeElements[i].emit('autorun', false)
      this.activeElements[i] = null
    }
    this.activeCount = 0
  }

  /**  */
  update() {
    // 
    this.autorun()
    const cells = this.cells
    const counts = this.counts
    const length = cells.length
    // 
    // 
    // 
    for (let i = 0; i &lt; length; i++) {
      counts[i] = cells[i].length
    }
    // 
    const deltaTime = Time.rawDeltaTime
    for (let i = 0; i &lt; length; i++) {
      const cell = cells[i]
      const count = counts[i]
      for (let i = 0; i &lt; count; i++) {
        const element = cell[i]
        // 
        if (element.connected) {
          element.updaters.update(deltaTime)
        }
      }
    }
    // 
    while (this.activeCount !== 0) {
      this.autorun()
    }
  }
}</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.2</a> on Sat Sep 30 2023 19:52:20 GMT+0800 () using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
